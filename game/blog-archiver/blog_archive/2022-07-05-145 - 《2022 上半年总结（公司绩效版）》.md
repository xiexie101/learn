---
title: "145 - 《2022 上半年总结（公司绩效版）》"
date: 2022-07-05
url: https://sorrycc.com/2022-half-review-performance-version
---

发布于 2022年7月5日

# 145 - 《2022 上半年总结（公司绩效版）》

感觉我每次写绩效的风格都不同，这次是按时间线组织的。

## Bigfish 4 研发与落地

2022.4，在 Bigfish 4 发布之前，我在内网语雀「更新了 9 篇 Bigfish 特性介绍」，希望借此让大家更好地了解 Bigfish 4。包含 MFSU V3、新路由、默认最快的请求、构建提速、ESLint、小而美的改进，等等。

2022.4.28，在 Bigfish 团队的通力配合下，我们「发布了 Bigfish 4」，相比计划时间提早半个月。伴随着 Bigfish 4，还有重新设计的「新版官网和文档」，配套的脚手架，「升级文档」，以及手把手的服务群。在这个版本里，除了看得见的新功能，我们也果断废弃了很多老功能，让技术栈进一步收敛，包括 bigfly、onex、单数目录模式 singular、must、deer、cnzz、browserUpdate、sff、sofa、h5 等。还有个看不见的变化是扩大了 Bigfish 团队的职责，把之前通过虚拟团队维护的子功能和胶水层收到 Bigfish 团队维护，减少不稳定因素和答疑的路由率。

2022.5.30，确定「Bigfish 4 的应用治理计划」。针对标准应用、重点和痛点应用、顽固老应用，使用不同的升级策略。这是个长期的过程，今年我们会为此投入不少时间。截止 2022.6.30，Bigfish 4 总应用数 101，月活占比 8.45%。

2022.5.31，我们上线了「基于雨燕的构建缓存能力」，解流程上 build 慢的问题，让有缓存时的构建提速 10 倍。比如 Bigfish 4 脚手架在没有缓存时 106s，有缓存只需 10s。这个功能之前 SmallFish 上过，但后来去掉了。Bigfish 上线此功能后也遇到各种奇怪问题，采取了各种措施，包括对异常场景进行埋点收集，推动雨燕实现用户手动重新构建时不启用缓存等。毕竟除了命名，程序员的另一大难题就是缓存失效。

2022.6.10，我们上线了「Bigfish 4 CodeMod 脚本」。基于此脚本，如果没有特殊场景，10 分钟左右就能完成项目升级，但现实总是有很多特殊场景。不管如何，这个脚本在大家升级 Bigfish 4 时，预计能帮助大家节约 80% 的重复劳动时间。我用此脚本给 yuyanAssets 做了升级，并提了升级 PR，PR 目前还在打磨中。

## Umi 和 Bigfish 的迭代与生态

2021.12.9，Bigfish 团队和来自五湖四海的的 Umi Contributor 开了第一次周会。时隔半年多，目前已是第 25 次周会。人员也扩充了不少，除了实线的陌大、辟殊、映高、晚兮（已离职）、王依依的加入，虚拟的 Umi Contributor 群也扩充到 33 人，有些是来自各个团队和其他 BU 的同学，更多的是社区各大中小厂的同学。加入的每一位都参与过 Umi 贡献，有一些还非常活跃，Umi 任务一公布都很快被认领完。

2022.1.13，推出「Bigfish 一周一问题计划」，Bigfish 团队成员每周轮值解一些优先级低但却实实在在影响开发者体验的问题。在开发新框架的同时，也不忘给老框架做改进。截止 2022.6.30，累计已解了 19 个问题。

2022.1.29，我们发布了「Umi 4 RC」。开始接收来自社区的反馈，也吸引了更多社区同学。而后就开始每周一个 RC 版本的节奏，持续打磨，最后一个 RC 是 4.0.0-rc.24。

2022.6.21，时隔半年，我们终于「正式发布了 Umi 4」。同时，Ant Design Pro 也已做跟进，其 master 分支的代码已升级到 Umi 4，两个社区通过脚手架新创建的项目默认都会是 umi 4。

2022.6.30，我们「发布了 Father 4 RC」。定位从「npm 包打包工具」变成「npm 包研发工具」，不仅是 build，还会有 changelog、release、doctor、deploy、generate 等 npm 包研发的全流程能力。这个版本前期进行了大量调研以及多轮 RFC 讨论，实现上基于 umi core 和 umi 体系一脉相承，功能上覆盖 esm、cjs 和 umd，使用文件到文件的 bundless 打包方式，以及支持 prebundle 对依赖进行预打包。同时 father 会利用 esbuild 和缓存将速度提升到最佳。

2022.6.30，实施 Bigfish 答疑流程优化方案，目标是「3 个月后让答疑成本减半」。如果能做到，这是双赢的。不仅 Bigfish 团队可以把时间用在更有意义的事情上，Bigfish 用户也能更快找到问题并解决。

2022.7.1，MFSU V4 "偷偷"上线，通过配置方式开启。MFSU V4 是针对 V3 的进一步改进，不仅解缓存 invalidate 的问题，还能进一步提升构建速度。目前，这个版本还需要一些时间打磨，来完善对边界场景的处理。

## 最佳实践 2022 的迭代

上半年最佳实践更多是在做完善、调研和探索，下半年会集中发力。完善是针对 Bigfish 4 重写大量最佳实践插件后的稳定性完善；调研包括 css in js、请求、icons 使用、monorepo、请求 hooks 库、mf、编辑器等。

具体落地情况是。请求方案已迭代，切换到 axios，随 Bigfish 4 内置；mf 方案在收尾阶段，适用于大型项目中对于组件和依赖的在线复用；monorepo 已有 PR 还在 review 阶段；请求方案 client loader 已完成并发布，目前尚未开始推广；icons 使用的前置任务已完成，待研发。

## 总评

整体感受是人多了，能做的事也多了。相比去年，一定时间内做的事也多了和快了。包括「Bigfish 4 发布」「应用治理」「Umi 4 发布」「Bigfish 4 x 雨燕构建缓存」「Bigfish 一周一问题」「Father 4 RC」「MFSU V4」「最佳实践 2022」等，具体在前面的备注中，不重述。

技术方面。由于维护「MDH 前端周刊」，每周六会花半天时间阅读一周积累的文章，对前沿技术保持着比较好的敏感度。半年时间陆续看了 14 个大大小小的框架和库的源码，并做了笔记，思路开阔了不少，同时也借鉴了不少思路到 Umi 和 Bigfish 中。

业务方面。主要是 Bigfish 4 的落地和应用治理，都在持续推进中。此外，Bigfish 4 从 dev（MFSU）和 build（Bigfish x 雨燕）到运行时都会更快，这应该也算是框架对于业务项目的促进，能实实在在地帮到业务项目和同学们。下半年会更聚焦在这一块，在最佳实践、应用治理、培训教程、DX 提升上方面投入更多时间，同时希望能有一些业务联动技术的点出现。

团队方面。感觉目前 Umi 和 Bigfish 团队兵强马壮，哈哈。从去年年中的人员波动导致的青黄不接，现在已经是非常好的状态了，有大量的实线团队成员，还有大量其他团队、BU 和来自社区的虚线团队。我需要花更多时间学习如何组织好这部分同学，让他们更好地发挥自己的能力。今年分享主要是内部，包括两次数字蚂蚁的外部团队分享。团队外被推荐为 GMTC 北京的出品人，由于疫情，本来 6 月份的会议推迟到 8 月底举行。
