---
title: "580 - 《用 Claude Code 的 N 种方式》"
date: 2025-07-23
url: https://sorrycc.com/how-to-use-claude-code
---

发布于 2025年7月23日

# 580 - 《用 Claude Code 的 N 种方式》

> 写个 Step by step 的教程，教大家我用 Claude Code 的方法。毕竟是吃饭的家伙，花时间打磨下划算的。

1、官方 Claude Code 用法。

先安装 Claude Code 。

```bash
npm i @anthropic-ai/claude-code -g
```

加个 `cc` 的 alias 。

```bash
alias cc="claude --dangerously-skip-permissions"
```

买官方的会员，我的购买方式是「用美区的 Apple 账号，支付宝充值 GIFT 卡」。参考 [575 - 《Claude Code》](https://sorrycc.com/claude-code) 。

另：如果怕封号，可参考 [579 - 《美国家宽》](https://sorrycc.com/usa-static-proxy) 搞个美国家宽 IP 代理。

2、模型提供商自己做的 Claude API 兼容。

相比在 chat 界面上问问题，这应该是他们消耗 token 更快的一种方式，所以最近的几个新模型推出都提供了 claude api 的兼容 api 。

1）Kimi K2，去 [https://platform.moonshot.cn/](https://platform.moonshot.cn/) 花点钱搞个 API Token 。  
2）Qwen3 Coder，去 [https://bailian.console.aliyun.com/](https://bailian.console.aliyun.com/) 花点钱搞个 API Token 。  
3）智谱提供 50 块包月包，[注册](https://www.bigmodel.cn/invite?icode=WMoLrFFGvvAP%2FuVspewhlf2gad6AKpjZefIo3dVEQyA%3D) 然后搞个 API Token 。（注：x 上风评一般，据说比较卡）

然后加下 ccq3coder、cck2 等的 alias，要用的时候执行对应的 alias 命令即可。

```bash
alias ccq3coder="ANTHROPIC_BASE_URL=https://dashscope.aliyuncs.com/api/v2/apps/claude-code-proxy ANTHROPIC_AUTH_TOKEN=YOUR_TOKEN claude --dangerously-skip-permissions"
alias cck2="ANTHROPIC_BASE_URL=https://api.moonshot.cn/anthropic/ ANTHROPIC_AUTH_TOKEN=YOUR_TOKEN claude --dangerously-skip-permissions"
alias cczp="ANTHROPIC_BASE_URL=https://open.bigmodel.cn/api/anthropic ANTHROPIC_AUTH_TOKEN=YOUR_TOKEN claude --dangerously-skip-permissions"
```

3、api proxy 。

在 proxy 里加个兼容层，把 openai compatible 的 api 转成 claude api 的风格。这里的方案比较多，但我用的比较少，除第一个比较早用过，第二个还不错。大家可以根据 star 和 issue 自行斟酌。

比如。

*   [https://github.com/coffeegrind123/gemini-code](https://github.com/coffeegrind123/gemini-code)
*   [https://github.com/fuergaosi233/claude-code-proxy](https://github.com/fuergaosi233/claude-code-proxy)
*   [https://github.com/badlogic/lemmy/tree/main/apps/claude-bridge](https://github.com/badlogic/lemmy/tree/main/apps/claude-bridge)
*   [https://github.com/musistudio/claude-code-router](https://github.com/musistudio/claude-code-router)
*   [https://github.com/mirrorange/clove](https://github.com/mirrorange/clove)
*   [https://ctok.ai/](https://ctok.ai/)
*   [https://github.com/Buywatermelon/claude-relay-monorepo](https://github.com/Buywatermelon/claude-relay-monorepo)

自己想搞的话可基于 [https://github.com/Wei-Shaw/claude-relay-service](https://github.com/Wei-Shaw/claude-relay-service) 搭一个。

补一个 iflow + claude-code-proxy 免费用 qwen3-coder（也可以用[其他的](https://docs.iflow.cn/docs/#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E4%BA%86%E8%A7%A3%E6%94%AF%E6%8C%81%E7%9A%84%E6%A8%A1%E5%9E%8B)）的例子。

1）在 [https://iflow.cn/?open=setting](https://iflow.cn/?open=setting) 并获取「限时免费」的 API Key 。

2）安装、配置和启动 claude-code-proxy 。

```
git clone git@github.com:fuergaosi233/claude-code-proxy.git
cd claude-code-proxy
uv sync
uv run claude-code-proxy
```

cat ~/.config/claude-code-proxy/config.json

```json
{
  "apiKey": "YOUR_KEY",
  "baseURL": "https://apis.iflow.cn/v1/",
  "modelMapping": {
    "claude-3-5-haiku-20241022": "Qwen3-32B",
    "claude-3-7-sonnet-20250219": "Qwen3-Coder",
    "claude-sonnet-4-20250514": "Qwen3-Coder",
    "claude-opus-4-20250514": "Qwen3-Coder"
  },
  "searchApiKey": "YOUR_KEY"
}
```

3）加个 bash 的 alias 配置。

```bash
alias ccproxy="ANTHROPIC_BASE_URL=http://localhost:8082 ANTHROPIC_AUTH_TOKEN=sk- claude --dangerously-skip-permissions"
```

4）执行 ccproxy 启动 Claude Code 。

4、号商提供的服务。

> 注：这种有潜在风险的，如果号商要加个恶意的 prompt 注入，轻轻松松！

比如。

*   anyrouter.top （已废，用不了了）
*   [问问 Code](https://code.wenwen-ai.com/register?aff=bR51)
*   [gaccode](https://gaccode.com/signup?ref=OBT5DRH8)
*   [yescode](https://co.yes.vg/)
*   packycode （看 telegram 群不太稳定，号池容易被封）
*   [instcopilot](https://doc.instcopilot-api.com/)
*   [六粒的AI店铺](http://shop.qqyunsd.com/) [Claude服务做了2年，我想说说心里话](https://mp.weixin.qq.com/s?__biz=MzkwMjQ0NzE0Mg%3D%3D&mid=2247484441&idx=1&sn=840dbb04b1cfa0fe49ff71c80f0aeef2&chksm=c14c4dbb66546fd22e8c3b0a7ee7af5b45f7555012a8b4fe99b566d0a33534c87c62bb82601e&mpshare=1&scene=1&srcid=07062FlkYJksGSmMr3soIUZJ&sharer_shareinfo=60b319a319f32c54c078a11da3a066f9&sharer_shareinfo_first=60b319a319f32c54c078a11da3a066f9&utm_source=substack&utm_medium=email)
*   [星际放映厅](https://www.naifeistation.com/)
*   [环球巴士](https://universalbus.cn/)
*   [银河录像局](https://nf.video/)
*   [FoxCode](https://shop.fox-code.cc/)
*   …

我理解背后的逻辑应该是他们买 Max 的号，通过美国家宽 ip 做代理，然后分流给多人使用。

参考：  
[575 - 《Claude Code》](https://sorrycc.com/claude-code)
