---
title: "16 - 《Low Import 研发模式》"
date: 2021-12-23
url: https://sorrycc.com/low-import
---

发布于 2021年12月23日

# 16 - 《Low Import 研发模式》

这是 Umi 4 的试验性功能之一，目前已开发完成，解的问题是让开发者少些或不写 import 语句。比如图 1 有大量的 import，这些其实可以通过工程化的方式自动处理，如图 2。

![](https://img.alicdn.com/imgextra/i3/O1CN015Q1eq21GNsunyIb6L_!!6000000000611-2-tps-738-558.png)

![](https://img.alicdn.com/imgextra/i2/O1CN01dnWsOc1pW8bV8X275_!!6000000005367-2-tps-802-336.png)

Umi 4 里通过 `lowImport: {}` 开启，然后就可以无 import 直接用路由相关的 Link、useLocation 等，数据流相关的 connect、useModel，antd 组件 Button、Calendar 等，以及其他更多。

并且，这些都有类型提示并且类型正确，比如输入 B，会出来 Button。

很久以前在「MDH 情报群」就聊过这个，思路受 [zx](https://github.com/google/zx) 启发。最近在 umijs/umi-next 下写的脚本全是用 zx，很喜欢这种无需 import 使用的感觉。

Low Import 方案在内网讨论过，争议很大，喜欢的人很喜欢，不喜欢的人很不喜欢。

实现其实不麻烦，两个关键点。1）自动加 import 通过 babel 插件实现 2）类型提示通过自动生成全局的 d.ts 实现，比如 react 就是 `declare global { const react: typeof import('react') }` 。

实现里部分参考了 [unplugin-auto-import](https://github.com/unplugin/unplugin-auto-import)。
