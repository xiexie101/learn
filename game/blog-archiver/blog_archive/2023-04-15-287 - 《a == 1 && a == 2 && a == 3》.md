---
title: "287 - 《a == 1 && a == 2 && a == 3》"
date: 2023-04-15
url: https://sorrycc.com/js-quiz-about-equal
---

发布于 2023年4月15日

# 287 - 《a == 1 && a == 2 && a == 3》

昨天在脉脉还看到一个没用的 JS 小技巧，但可以用来点亮一些 JavaScript 的知识点。问题是，如何实现 a，让 a 1 && a 2 && a == 3 的执行结果为 true？

我看到也一下子没反应过来。。想知道答案怎么办？例行问 ChatGPT 啊。我拿他分别问了 GPT 3.5 和 GPT 4。前者给了错误答案，后者给了正确答案，见下图。所以有时候多花点钱还是能帮我们省出时间的。

![](https://img.alicdn.com/imgextra/i3/O1CN01uUEqSc1bevUmfKckS_!!6000000003491-2-tps-2566-1070.png)

![](https://img.alicdn.com/imgextra/i2/O1CN01ZkGXxw1Vf1tI2dUDi_!!6000000002679-2-tps-1512-1286.png)

我把代码贴出来，感兴趣的可以跑跑看。

```ts
let currentValue = 0;

const a = {
  valueOf: function() {
    currentValue += 1;
    return currentValue;
  }
};

console.log(a == 1 && a == 2 && a == 3); // -> true
```

聪明的同学们可能会发现，其实也可以利用 Proxy 实现。

```ts
let currentValue = 0;
const handler = {
  get: function(target, prop) {
    currentValue += 1;
    return () => currentValue;
  }
};
const a = new Proxy({}, handler);
console.log(a == 1 && a == 2 && a == 3);  // -> true
```

如果我们在 get function 里加 `console.log(prop)` 打印下 prop，会发现输出的是「Symbol(Symbol.toPrimitive)」，即前面 GPT 4 答案里的描述的「转换为原始值」这个操作。
