---
title: "139 - 《迁移 umi-next 代码到 umi》"
date: 2022-06-23
url: https://sorrycc.com/umi-next-to-umi
---

发布于 2022年6月23日

# 139 - 《迁移 umi-next 代码到 umi》

umi 4 一直是在 umijs/umi-next 仓库开发的，现在 umi 4 正式发布了，需要迁移代码回 umijs/umi 仓库，要求是得保留所有人 commit。更重要的是 git blame 能找到人，不然全部都是我 commit 的。。

操作其实是两个简单的命令，但发现不少人都不清楚，就水一篇日更了。

1、先在 umijs/umi-next 仓库找到开始开发的起点 commit hash，用 git format-patch 创建 .patch 文件。

```bash
git format-patch [commit-hash] --stdout > umi-next.patch
```

umi-next 的 patch 有 300 多M，见图。

![](https://img.alicdn.com/imgextra/i3/O1CN01NaLex61CjdGMYYLel_!!6000000000117-2-tps-488-440.png)

2、然后在 umijs/umi 仓库清空文件，保持和 umijs/umi-next 的起点状态一致，通过 git am 添加 commit patch。

```bash
git am umi-next.patch
```

参考：  
[https://devconnected.com/how-to-create-and-apply-git-patch-files/](https://devconnected.com/how-to-create-and-apply-git-patch-files/)
