---
title: "120 - 《手撕源码 11：Master Styles》"
date: 2022-05-24
url: https://sorrycc.com/source-11-master-styles
---

发布于 2022年5月24日

# 120 - 《手撕源码 11：Master Styles》

[https://styles.master.co/](https://styles.master.co/)

昨天看到的这个库，第一印象是首页做地很精美，然后早上简单翻了下源码。作者是 [1Aron](https://github.com/1Aron)，来自台湾的小伙。

先看用法，

第一步：页头引入需要的样式和 JS 引用

```html
<link href="https://unpkg.com/@master/normal.css" rel="stylesheet">
<script src="https://unpkg.com/@master/style"></script>
<script src="https://unpkg.com/@master/styles"></script>
```

第二步：在 HTML 元素中按规则写样式

```html
<h1 class="font:40 font:heavy font:italic m:50 text:center">Hello World</h1>
```

可以看到，Master Styles 提供了另一种写样式的方法。这和 tailwind 有点像，都是在 html 中通过 util 形式组装样式。但这些 util 浏览器是不认的，所以需要一个编译的过程。现有方案中，tailwindcss、windicss、unocss 等都是编译时处理，而 Master Styles 是运行时通过 MutationObserver 监听 html 的变化处理。

原理是，`MutationObserver` > `querySelectorAll('[class]')` 收集样式 > 添加汇总后的内联样式到 `<head>` 中。

这是个大胆的想法，这个网站也是基于此方案搭建。但个人不推荐使用，建议观望，原因是，1）性能，放在运行时做肯定有性能损耗，尤其是项目大了之后，之前就有具体项目用到过，2）扩展性，比如不支持 SSR，要支持 SSR 还是得回归到编译时，那和 tailwindcss 等方案就没啥区别了。
