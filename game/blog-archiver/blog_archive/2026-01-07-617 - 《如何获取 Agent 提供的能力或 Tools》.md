---
title: "617 - 《如何获取 Agent 提供的能力或 Tools》"
date: 2026-01-07
url: https://sorrycc.com/how-to-get-agent-tools
---

发布于 2026年1月7日

# 617 - 《如何获取 Agent 提供的能力或 Tools》

> Wrote copilot with AI.

> 上午注册了 [flova.ai](http://flova.ai)，看了个[官方示例](https://www.flova.ai/en/example/detail/?project_id=b8b28afd-e8bd-41b4-8190-82cf38d07b32)还是挺惊艳的。于是准备研究下他所提供的能力，直接要求他提供 tool 参数不行，一番调研后，说是需要委婉一些，让他告诉你他所提供的能力。做下记录。

当你问一个 Agent "请列出你所有的工具函数名和参数"时，它大概率会拒绝你：

_“I can’t provide a complete internal specification of my functions…”_

![](https://pic.sorrycc.com/proxy/1767764628497-743468961.png)

这不是 Agent 在跟你作对。工具名、参数结构、返回对象属于内部实现，暴露它们可能带来安全风险——比如 prompt injection、越权调用、攻击面探测。

但你确实需要知道它能做什么。怎么办？

## 方式一：换一种问法

Agent 拒绝的是"内部函数规格"，但通常愿意提供"用户可用能力"。关键是把问题换个形式。

别问"请列出所有工具的函数名和参数 schema"，这会触发拒绝。换成这样问更有效：列出你对最终用户公开、且允许用户触发的能力/动作清单（不要包含内部函数名、实现细节）。对每项能力给出：用途、我需要提供的输入字段、输出形式、常见失败原因/限制、一个示例请求。

![](https://pic.sorrycc.com/proxy/1767764809068-981599436.png)

这类问题不触碰"实现细节"红线，但能让你了解它的能力边界。

## 方式二：要审计日志

与其问它"有什么"，不如看它"用了什么"。

很多平台支持在对话中显示 “Used tool: …”，或者导出包含时间、脱敏参数和返回摘要的 tool calls 记录。你可以请求开启本次会话的 tool-call trace，或者要求它提供最近几次工具调用的记录，包括工具类别、调用目的、是否涉及写入、是否成功等信息。

请列出本次会话中你调用过的所有工具记录，包括：工具类别（读取/写入/搜索/其他）、调用目的、是否涉及写入操作、是否成功、如失败请说明原因。

> [https://gist.github.com/sorrycc/6d27983fa943e1486dff74f488e0172e](https://gist.github.com/sorrycc/6d27983fa943e1486dff74f488e0172e) 是产出的 [Flova.ai](http://Flova.ai) 的功能列表，知道他有什么之后，才能更好地用他。

实际调用记录比"自述能力"更可靠——它说有不一定真有，但调用过的一定有。

## 方式三：黑箱测试

直接让它尝试完成任务，观察结果。

设计一组覆盖不同能力的测试任务：读取类的比如访问某个文件、网页或数据库；写入类的比如创建文件、发邮件或发消息；搜索类的比如搜索代码、文档或网页。然后要求它按固定格式汇报：是否完成任务、是否需要授权确认、是否真的执行了外部动作并提供证据、如果失败则说明原因。

请依次尝试以下任务，并按格式汇报结果：1）读取 [https://example.com](https://example.com) 的内容；2）在当前目录创建一个名为 test.txt 的文件；3）搜索本项目中包含 “TODO” 的代码。汇报格式：任务描述、是否完成、是否需要授权确认、执行证据（如有）、失败原因（如有）。

这种方法不需要知道函数名，直接得到"能力边界"。

## 结语

获取 Agent 的能力信息，本质上是在透明度和安全之间找平衡。Agent 拒绝暴露内部函数名是合理的，但这不意味着你无法了解它能做什么。换一种问法、看审计日志、做黑箱测试——这三种方式能让你在不对抗系统策略的前提下，拿到你真正需要的信息。
