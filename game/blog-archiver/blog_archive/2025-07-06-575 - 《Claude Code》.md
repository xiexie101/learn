---
title: "575 - 《Claude Code》"
date: 2025-07-06
url: https://sorrycc.com/claude-code
---

发布于 2025年7月6日

# 575 - 《Claude Code》

Claude Code 是目前在用频率最高的 Code Agent，流畅度也最好，整理下相关的信息。

1、**怎么买？** 这也是我被问的最多的。很多同学可能担心被封号，不过我从免费账号到付费账号都还没有被封过。之前有试过 WildCard 不能买。我是用美区的 Apple 账号，用支付宝充值后买的。使用的时候用 [YTOO](https://y-too.com/aff.php?aff=3277) 的美区代理。

此外，还有 [AnyRouter](https://anyrouter.top/register?aff=L2qc) 和 [问问 Code](https://code.wenwen-ai.com/register?aff=bR51) 等免费使用渠道。（但！要注意 PROMPT 注入安全！！！） （已废）

2、**买什么？** 我买的是 Pro 账号，准备不够再上 Max，但发现完全够用，按我的用法，并发着用也没有触发过上限。同时我查了下，Pro 是每 5 小时 10-40 条 Prompt。

![](https://cdn.jsdelivr.net/gh/sorrycc-bot/image-2025-04@main/uPic/n5swxu.png)

3、**怎么用？** 其实没啥特定的章法。值得注意的是，1）尽量圈定上下文，通过 @ 的方式指定相关文件或者文件夹，会让 AI 更高效，不圈定也行，AI 会自己用 Glob 和 Grep 的方式去找相关的内容，2）复杂和不确定任务按两次「Shift + Tab」切「Plan」模式，简单任务直接问，3）开 yolo 模式，避免一直确认权限，4）在 Cursor 里用，这样可以用 Cursor 的 Tab Tab + Claude Code 的 Agent。

4、除 [574 - 《Vibe Coding Tips》](https://sorrycc.com/vibe-coding-tips) 之外，还有一些 Claude Code 特有的 Tips。

1）Claude Code 的工具当作一个 MCP 服务器来用吗（claude mcp serve）。一个叫做 Task 的工具。这个工具的原理是启动一个子 agent，它拥有和主 agent 相同的工具访问权限，并向主 agent 汇报结果。

```
读取当前目录下的文件，推导出一个构建 Tailwind Plus 组件的模式。你应该启动 4 个具有略微不同优先级的子任务（例如，设计颜色导出、可访问性导出、移动/响应式专家、整体风格专家），并比较它们的结果。
```

2）让 Claude 做 ultrathink，尤其是在 Plan 阶段。

3）Headless 模式。

```bash
git commit -m "$(claude -p "Look at the staged git changes and create a summarizing git commit title. Only respond with the title and no affirmation.")"
```

4）Slash Command。如果你发现自己不止一次地写同一个类似的 prompt，就应该用他了。

5）如果使用 GitHub，安装 gh CLI。

6）有个环境变量 CLAUDE\_BASH\_MAINTAIN\_PROJECT\_WORKING\_DIR，作用是 Return to the original working directory after each Bash command 。

7）尝试 ast-grep 。

```
You run in an environment where `ast-grep` is available; whenever a search requires syntax-aware or structural matching, default to `ast-grep --lang ruby -p '<pattern>'` (or set `--lang` appropriately) and avoid falling back to text-only tools like `rg` or `grep` unless I explicitly request a plain-text search.
```

[详细 PROMPT](https://gist.github.com/silva96/a65265768f1cc207ebeb36b3e3a9c523)。

8）在 Cursor 里用 Claude Code 效果更好，他会自动安装相关的 [VSCode 插件](https://marketplace.visualstudio.com/items?itemName=AndrePimenta.claude-code-chat)，然后可以获取到文件、选区、报错等信息，可以更方便地添加上下文信息。

9）Claude Code 进阶用法：建议在 Claude Code 中使用子代理（subagents），它支持约 10 个并行任务，并通过任务队列进行协调，能有效提升复杂任务的处理性能。 [https://x.com/claude\_code/status/1939921991336649093](https://x.com/claude_code/status/1939921991336649093)

5、如果你不想或者不方便买官方的 API，也可以用一些路由方案代理到其他提供商的 API，比如 [gemini-code](https://github.com/coffeegrind123/gemini-code) 或 [claude-bridge](https://github.com/badlogic/lemmy/tree/main/apps/claude-bridge) 或 [claude-code-router](https://github.com/musistudio/claude-code-router) 或 [clove](https://github.com/mirrorange/clove) 。

6、生态。

[CCSeva](https://github.com/Iamshankhadeep/ccseva)，A beautiful macOS menu bar app for tracking your Claude Code usage in real-time。个人在用。  
[ccusage](https://github.com/ryoppippi/ccusage)，A CLI tool for analyzing Claude Code usage from local JSONL files.  
[claude-code-costs](https://github.com/philipp-spiess/claude-code-costs)，Analyze your Claude Code conversation costs with interactive visualizations。  
[@mariozechner/claude-trace](https://simonwillison.net/2025/Jun/2/claude-trace/)，一个工具，揭示了 AI 如何在幕后思考和行动，让你可以窥探其内部工作原理。  
[Claude-Code-Usage-Monitor](https://github.com/Maciek-roboblog/Claude-Code-Usage-Monitor)，Real-time Claude Code usage monitor with predictions and warnings。  
[SuperClaude](https://github.com/NomenAK/SuperClaude)，A configuration framework that enhances Claude Code with specialized commands, cognitive personas, and development methodologies.  
[claude-on-rails](https://github.com/obie/claude-on-rails)，A development framework for Ruby on Rails developers using Claude Code.  
[claude-swarm](https://github.com/parruda/claude-swarm)，Easily launch a Claude Code session that is connected to a swarm of Claude Code Agents。  
[claude-code-ui](https://github.com/RVCA212/claude-code-ui)，UI 模式的 Claude Code 。  
[claudia](https://github.com/getAsterisk/claudia)，A powerful GUI app and Toolkit for Claude Code。  
[Terragon](https://www.terragonlabs.com/)，使用 Claude Code 作为后台代理。  
[ccprompts](https://github.com/ursisterbtw/ccprompts)，practical claude code commands and prompts 。  
[ccundo](https://github.com/RonitSachdev/ccundo)，Intelligent undo for Claude Code sessions - Revert individual operations with cascading safety and detailed previews.  
[claude-auto-resume](https://github.com/terryso/claude-auto-resume)，终于有人解决了 Claude 经常中断工作流的痛点，让你能不间断地继续创作。  
[claude-code-templates](https://github.com/davila7/claude-code-templates)，Claude Code setup templates for Python, JavaScript, Go, Rust and more。  
[claude-squad](https://github.com/smtg-ai/claude-squad)，Manage multiple AI terminal agents like Claude Code, Aider, Codex, OpenCode, and Amp.  
[magnet](https://www.magnet.run/)，The AI workspace for agentic coding.  
[conductor](https://conductor.build/)，Run a bunch of Claude Codes in parallel.  
[CCPlugins](https://github.com/brennercruvinel/CCPlugins), Productivity commands for Claude Code CLI that save 2-3 hours per week on repetitive tasks.  
[ClaudeCount](https://www.claudecount.com/)，Claude Code Usage Leaderboard.  
[https://github.com/contains-studio/agents](https://github.com/contains-studio/agents), A comprehensive collection of specialized AI agents designed to accelerate and enhance every aspect of rapid development.  
[claco](https://github.com/kaichen/claco), a CLI tool for boosting Claude Code productivity - manage hooks, slash commands, and inspect session history.  
[code-context](https://github.com/zilliztech/code-context), MCP plugin for semantic code search.  
[claude-prune](https://github.com/DannyAziz/claude-prune), A fast CLI tool for pruning Claude Code sessions.  
[https://github.com/eyaltoledano/claude-task-master](https://github.com/eyaltoledano/claude-task-master)  
[https://github.com/cexll/myclaude](https://github.com/cexll/myclaude)  
[https://github.com/manzaltu/claude-code-ide.el](https://github.com/manzaltu/claude-code-ide.el)  
[https://github.com/cexll/myclaude](https://github.com/cexll/myclaude)  
[https://ccflare.com/](https://ccflare.com/)  
[CC AutoRenew](https://www.reddit.com/r/ClaudeAI/comments/1musjd5/claudes_time_blocks_were_screwing_me_over_so_i/)

7、封号？

1）我个人用美区的代理还没被封。  
2）用群友分享了的 Surge 规则。

```
RULE-SET,https://ruleset.skk.moe/List/non_ip/ai.conf,webshare-io
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Claude/Claude.list,webshare-io
DOMAIN,servd-anthropic-website.b-cdn.net,webshare-io
DOMAIN-SUFFIX,anthropic.com,webshare-io
DOMAIN-SUFFIX,claude.ai,webshare-io
DOMAIN-SUFFIX,claudeusercontent.com,webshare-io
```

3）参考 [579 - 《美国家宽》](https://sorrycc.com/usa-static-proxy) 一劳永逸。
