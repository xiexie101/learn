---
title: "133 - 《邮件服务和 Newsletter》"
date: 2022-06-14
url: https://sorrycc.com/mail-service-and-newsletter
---

发布于 2022年6月14日

# 133 - 《邮件服务和 Newsletter》

新版 Umi 官网要加一个 NewsLetter 的订阅功能，开发者订阅之后，会定期发送框架更新和公告。

初步想法是用 self host 的 [headless cms strapi](https://strapi.io/) 建一个 umi\_user 的表维护邮件列表，通过 restful api 增删改查；然后用 umi 4 的 api routes 写一个 serverless 服务，处理用户注册、邮件确认、退订、邮件群发等，部署在 vercel 上。

一切都很顺利，但最后卡在邮件服务上，发现各个云平台对于邮件的审核还是挺严的。

先找了腾讯云和阿里云，不能随意发内容，只能用模板发，然后模板要审核，写了一个简单的模板，被提醒「太简单」。。见图 1，于是弃坑。

然后试了 [Amazon SES](https://aws.amazon.com/cn/campaigns/emailservice/)，可以先在沙箱环境玩，要上生产时需要提 ticket 详细描述邮件服务，包括频率、如何注册、如何退订等。我写了一份，目前还在审核进程中。

还有试了 [mailgun](https://www.mailgun.com/)，但验证手机的短信几个小时都没发过来；看了下 [sendy](https://sendy.co/)，一套 php + mysql 的皮，服务器代码一次性买断是 $69，背后还是用的 Amazon SES。以及还没来得及尝试的 [https://sendgrid.com/](https://sendgrid.com/) 和 [https://www.clicksend.com/](https://www.clicksend.com/) 。

然后想还是试试 [nodemailer](https://nodemailer.com/) + gmail 吧，但是很快被[文档](https://nodemailer.com/usage/using-gmail/)劝退，由于 gmail 登录的安全校验，部署到生产之后通常会遇到异地登录被拦截的问题，除非开 OAuth2 登录，有点麻烦，放弃。。

最后想了想，还是用专门的 NewsLetter 服务算了。先试了 [emailoctopus](https://emailoctopus.com/)，带 brand 广告的免费，目前还在审核中；然后试了 [getrevue.co](https://www.getrevue.co/)，发现这个不仅免费，还支持 CNAME、表单嵌入、API Server，几行代码完成接入。

```html
<form action="http://newsletter.sorrycc.com/add_subscriber" method="post" target="_blank">
<input placeholder="邮箱" name="member[email]" />
<button type="submit">订阅</button>
</form>
```

所以，最终的选择是 [getrevue.co](http://getrevue.co)，大家可以在 [https://next.umijs.org/](https://next.umijs.org/) 右下角试试，订阅 UmiJS 的 NewsLetter。
