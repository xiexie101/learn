---
title: "507 - 《供应链投毒和安全》"
date: 2024-12-31
url: https://sorrycc.com/supply-chain-poisoning-and-security
---

发布于 2024年12月31日

# 507 - 《供应链投毒和安全》

之前就起了个标题，一直拖着，到现在都快忘记内容了。简单写下吧。

1、事件始末应该是 vant 和 rspack 的维护者的 token 被盗，然后导致被恶意发包。vant 依赖被投毒后，会在构建时访问恶意网站 [pool.supportxmr.com](http://pool.supportxmr.com) ，[其会在本地进行挖矿](https://github.com/web-infra-dev/rspack/issues/8767#issuecomment-2555772131)。这种供应链投毒事件还是挺危险的。翻记录 rspack 这好像已经是第二次了，[在 24 年 5 月也有一次](https://www.praetorian.com/blog/compromising-bytedances-rspack-github-actions-vulnerabilities/)？

2、蚂蚁应对还是很快的。收到反馈后，拉黑 vant 包，反查还在用 vant 的包和迭代，利用 bug-versions 标记为异常版本。DONE。

3、盲猜原因应该也是 token 被盗，被盗原因应该是 github action 的供应链攻击。antd 之前也有一次类似经历，导致 github star 被清 0，其实也是这个原因。

4、所以，token 发包和本地 + otp 发包哪个更安全？我之前一直以为是前者，token 只出现一次，然后存到 github scrects 里就再也不会出现，为啥会不安全。听偏右介绍后才知道，github action 可以把 scrects 打印出来。所以只要某个 github action 或其他背后的依赖链想投毒，还是可以做的很隐蔽的。这应该也是为啥 antd 用本地 + otp 发包的原因。

5、另一个启示就是 token 的使用。1）注意别多给权限，2）多套 token，不同场景用不同权限的 token。

参考：  
[https://github.com/youzan/vant/releases/tag/v4.9.15](https://github.com/youzan/vant/releases/tag/v4.9.15)  
[https://github.com/web-infra-dev/rspack/issues/8767#issuecomment-2555772131](https://github.com/web-infra-dev/rspack/issues/8767#issuecomment-2555772131)  
[https://github.com/cnpm/bug-versions/pull/262](https://github.com/cnpm/bug-versions/pull/262)  
[https://www.praetorian.com/blog/compromising-bytedances-rspack-github-actions-vulnerabilities/](https://www.praetorian.com/blog/compromising-bytedances-rspack-github-actions-vulnerabilities/)
