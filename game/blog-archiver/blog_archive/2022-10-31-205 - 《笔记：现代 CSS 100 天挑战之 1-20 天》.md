---
title: "205 - 《笔记：现代 CSS 100 天挑战之 1-20 天》"
date: 2022-10-31
url: https://sorrycc.com/css-100-day-challenge-01
---

发布于 2022年10月31日

# 205 - 《笔记：现代 CSS 100 天挑战之 1-20 天》

好久没关注 CSS，发现 CSS 不仅可以[画 Github 猫](https://tw93.netlify.app/)，也可以[画高清美女](https://diana-adrianne.com/purecss-pinup/)。最近看到这个 [https://www.matuzo.at/blog/2022/100-days-of-more-or-less-modern-css/](https://www.matuzo.at/blog/2022/100-days-of-more-or-less-modern-css/) ，感觉是时候补充下 CSS 的知识了，因为好多点都不知道。

以下是笔记。

Day 1、自定义属性的第二个参数是 fallback 值

```css
// --not-set 没有设置时，会 fallback 到 #000
color: var(--not-set, #000);

// 可以嵌套自定义属性
color: var(--not-set, var(--also-not-set, #000));

// 自定义属性没有值时，会导致前面声明的 red 也失效
color: red;
color: var(--not-set);
```

Day 2、逻辑属性，不区分 left、right、top、bottom，改用 start 和 end 表示，对于需要同时支持 LTR 和 RTL 网站时有奇效。margin-inline-end 只是其一，还有 margin-block、padding-inline、padding-block 等方式的布局定义方式。block 用于垂直，inline 用于水平。

```css
// 之前
.item { margin-right: 1em }
.media[dir="rtl"] .item { margin-left: 1em }

// 之后
.item { margin-inline-end: 1em }
```

Day 3、逻辑属性简写。由于只有两个值，所以简写的方式是 1 个值是表示两个用一个值，两个值是就分别设置。

```css
margin-inline: 1em 2em;
```

Day 4、min 函数。表示取其中最小值，这在绝对数值时没啥意义，但遇到相对数值时就有用了。

```css
width: min(100%, 800px);

// 上述定义的等价定义
width: 100%;
max-width: 800px;
```

Day 5、max 函数。类似 min 函数。

```css
width: max(300px, 50vw);

// 上述定义的等价定义
min-width: 300px;
width: 50vw;
```

Day 6、:has 伪类。这个属性比较熟，周报里写过好几次，用于定义包含了子元素的父元素的样式。

```css
.form-item:has([aria-invalid="true"]) {
  --color: #F00;
}
```

Day 7、subgrid。目前只支持 Firefox 71+ 和 Safari 16+。没看懂，因为不会 grid，略。

Day 8、:has 伪类嵌套。:has 是不支持嵌套的。

```css
div:has(p) { border: 4px solid red }
p:has(strong) { border: 4px solid blue }

// 这行不支持
div:has(p:has(strong)) { border: 4px solid green; }
// 但这样可以，也算是曲线救国了
div:has(p strong) { border: 4px solid green; }
```

Day 9、inset 属性简写。inset 是 top、right、bottom、left 属性的简写，和 margin 规则一致。

```css
.child {
  positoin: absolute;
  /* top: auto; right: 20px; bottom: 20px; left: auto; */
  /* 以下是上一行的简写 */
  inset: auto 20px 20px auto;
}
```

Day 10、全局样式和 web components。全局样式会对 web components 里定义的起作用吗？这取决于定义 web component 的方式。1）不使用 Shadow DOM 的可以，2）使用 Shadow DOM 的不可以，3）Shadow DOM + Slot 的形式，Slot 下的可以。

Day 11、color 值的 space 间隔写法。CSS Color Module Level 4 之后支持以空格为间隔的写法了。

```css
/* 之前 */
color: rgba(255, 0, 0, 0.5);
/* 之后，以下三种写法效果相同 */
color: rgb(255 0 0 / 50%);
color: rgb(255 0 0 / 0.5);
color: rgb(100% 0 0 / 0.5);
```

Day 12、max() 小技巧。

```css
margin-inline: max(0px, ((100% - 64rem) / 2)); 

/* 等同于 */
max-width: 64rem;
margin: 0 auto;
width: 100%;
```

Day 13、:where() 和 :is() 伪类。他们可以让我们在写选择器列表时更紧凑。

```css
/* 之前 */
input[type="text"],
input[type="email"],
input[type="url"],
input[type="tel"],
input[type="password"],
input[type="search"] {
  border: 2px solid;
}
/* 之后 */
input:where(
  [type="text"],
  [type="email"],
  [type="url"],
  [type="tel"],
  [type="password"],
  [type="search"]
) {
  border: 2px solid;
}

a:is(:link, :visited) {
  color: green;
}
a:is(:hover, :focus) {
  text-decoration: none;
}
```

Day 14、:is() 和 :where() 的区别。从视觉上看没啥区别，区别在优先级。

```css
/* Specificity: 0 0 1 (0 ids, 0 classes, 1 tag) */
button:where(.button1) {
  background-color: red;
}

/* Specificity: 0 1 1 */
button:is(.button2) {
  background-color: red;
}

/* 能覆盖（0 1 0 > 0 0 1） */
.button1 { color: green; }
/* 不能覆盖（0 1 0 < 0 1 1） */
.button2 { color: green; }
```

Day 15、:modal 伪类。`<dialog>` 元素有两个 show 方法，1）show()，2）showModel()，后者会让 dialog 之外的元素不可交互。样式上则可以通过 :modal 伪类来区分这两种 dialog 。

```css
dialog:modal {
  border: 4px dotted red;
}
```

Day 16、:has() 伪类的优先级。:has() 和 :is()、:not() 一样，:has() 本身的优先级会被其包含的选择器替代。

```css
/* 0 id 1 class 1 tag */
div:has(.child) {}
```

Day 17、:picture-in-picture 伪类。用于定义视频被切到画中画之后，原视频的样式。

```js
if (document.pictureInPictureElement) {
  document.exitPictureInPicture();
} else if (document.pictureInPictureEnabled) {
  video.requestPictureInPicture();
}
```

```css
:picture-in-picture {
  opacity: 0.3;
  filter: blur(5px);
}
```

Day 18、样式继承与 web components。shadow dom 会继承父元素的样式吗？会！[shadow tree 的 top level 元素会继承他们的 host 元素的样式](https://www.w3.org/TR/css-scoping-1/#inheritance)，也就是说[可继承的样式](https://web.dev/learn/css/inheritance/#which-properties-are-inheritable)都会被传递给 shadow dom。

Day 19、:placeholder-shown 伪类。用于给没有输入过，目前还显示着 placeholder 的表单元素定义样式。

```css
input:placeholder-shown {
  outline: 5px solid blue;
}
```

Day 20、scrollbar-gutter 属性。scrollbar-gutter 属性可以设置滚动条的样式，通常用来解[滚动条从无到有时导致的布局闪烁问题](https://www.bram.us/2021/07/23/prevent-unwanted-layout-shifts-caused-by-scrollbars-with-the-scrollbar-gutter-css-property/)。

```css
scrollbar-gutter: stable;
scrollbar-gutter: stable both-edges;
```

参考：  
[https://www.matuzo.at/blog/2022/100-days-of-more-or-less-modern-css/](https://www.matuzo.at/blog/2022/100-days-of-more-or-less-modern-css/)
