---
title: "251 - 《新文档方案 Docaid》"
date: 2023-01-30
url: https://sorrycc.com/docaid
---

发布于 2023年1月30日

# 251 - 《新文档方案 Docaid》

> 代码在 [https://github.com/sorrycc/weekly](https://github.com/sorrycc/weekly) 。

1、先说下背景。这段时间先是把 mdhweekly 官网搭了起来；然后发现有些和文档以及 markdown 相关的功能可以下层为一个库，比如解析 docs 目录生成元信息、生成 rss、页面上把 markdown 或 html 渲染出来等等，于是沉淀了 docaid 库，包含一些 node 侧的函数和 browser 侧的组件；再然后发现 docaid 库太底层，基于这个搭还是需要自己做不少脚手架和组件层的事，于是往上封装了 umi-plugin-docaid 库，以及与之配套的 create-docaid 脚手架。

2、大家可以通过 `pnpm create docaid` 尝鲜，还有些 Bug 待修，跑出来应该是这样，复刻了一个 [mdhweekly.com](http://mdhweekly.com) 。同时生成的文件里除了文档，只有配置。大家如果有搭建 Blog 和文档站点的需求可以尝尝先，这个库我会持续花时间完善的，毕竟我自己也在用。

![](https://img.alicdn.com/imgextra/i3/O1CN01jehsGC1PV3Y59U06z_!!6000000001845-2-tps-1990-1274.png)

3、为啥要提 docaid、umi-plugin-docaid 和 create-docaid？因为懒，哈哈。因为我想把 mdhweekly 官网的这套搬到 [sorrycc.com](http://sorrycc.com) 上，然后把以前写过的文章全部整理到这。但是，直接 copy 一遍 mdhweekly 的代码就太挫了，作为有洁癖的程序员完全不能忍，于是就做了这些事情。这里有一点想法是，很多工作上的事也是如此，都花大量时间做了 100% 了，但如果再往前多做 10%（到 110%），就可能会收获 200% 的价值，但很多人都停留在 100% 而不会往前做。（上升下价值观，哈哈）

4、docaid 名字怎么来的？[感谢 ChatGPT](https://t.me/yqtalk/154)。

5、说下技术栈。spa + csr + umi + react-query + styled-components + markdown-it。为啥是 csr 而不是 ssg？感觉 csr 性能够用，同时我也想验证下 umi 之前做了各种优化手段，比如 clientLoader。当然，后面会支持 ssg 的。为啥是 spa？个人喜好吧，总感觉 islands 架构的 mpa 没 spa 快。react-query + styled-components？感觉很好用，蚂蚁内部中台项目也即将开始推这套组合。为啥是 markdown-it？其实我没想好，当时用 markdown-it 是因为简单吧，后续可能会加个配置项切换到 mdx，因为可扩展性更强。

6、后续规划？现在还缺了好多功能，比如 SSG、og 分享 meta 头、sitemap、主题、暗黑模式、全文搜索、全文 RSS、国际化、图片组件等等。感兴趣的可以考虑 PR 参与下，熟悉 umi 插件开发的就可以上。

7、竞品？dumi、vitepress、docuraurus、astro、nextra 等，不过考虑这个有点过早了…

8、Umi 官网会切过去吗？短期不会，长期可能会，看 docaid 发展。
