---
title: "99 - 《新框架发布和应用治理》"
date: 2022-04-19
url: https://sorrycc.com/bigfish-4-and-governance
---

发布于 2022年4月19日

# 99 - 《新框架发布和应用治理》

最近要发布 Bigfish 4（Bigfish 是基于 Umi 的蚂蚁内网框架），而内网做框架有一点不同的是要做「应用治理」。不能只管生，不管养。应用治理指框架负责人需要负责项目应用的技术迭代，比如框架升级到 4，就需要同时推动业务项目升级到 4。

应用治理主要是做到让开发者「愿意升，容易升」，分几个阶段。

准备阶段需要做很多事的，包括预热、迁移文档、codemod 脚本、新官网、数据监控、内测收集。通过预热让开发者了解新特性，优先通过特性吸引开发者升级而不是通过行政的方式；迁移文档是基础，codemod 脚本是基于文档的自动化，这两个不需要一下子写很完善，可以逐渐迭代；新版本通常会伴随着新官网和新文档；数据监控可以让我们清楚地知道有哪些项目在用，哪些项目升级后又退回去，升级前后项目的数据对比等；同时这个阶段会收集愿意参加内测的项目。

内测阶段需要建群提供手把手服务、更新脚手架。此时框架处于 beta 或 rc 版本阶段，问题相对更多，所以我们通常是直接投人帮用户升级，同时记录升级过程，补充到迁移文档中；这个阶段的用户属于种子用户，通常质量更高，服务好了可带动更多用户升级；然后响应要快，BUG 确保当天修复当天发布；在框架的基础上还有脚手架，我们有大量的脚手架，内测阶段可考虑将部分脚手架切换到新的框架版本，用以验证更多场景；内测结束后别忘了做个调研，跟进这段时间的开发者体验。

推广发布阶段就是发布、推广和拉新。发布需要准备发布稿，然后在你能想到的地方都推广下，还可以搞个发布会或至少准备个蛋糕庆祝下；推广至少覆盖大部门同学、框架用户；拉新重要的一点是把所有脚手架切换到新框架，让新建项目全部使用新的框架版本，这非常重要，在蚂蚁，新项目在应用治理中占比很高；同时可以设立前期的「手把手迁移服务群」，引导大家尽早完成迁移。

落地阶段可以做重要项目迁移专项、痛点项目迁移专项、极老项目迁移专项、迁移的自动化等。人人皆知的重要项目可以立标杆，让更多人愿意迁，同时这些项目通常复杂且大，可以发现更多问题；痛点项目比如构建最慢的 TOP 10 项目，如果新框架能解他们的问题，他们是会愿意配合的；同时不能忘记非常老的同时还在迭代的项目；迁移自动化是基于 codemod，自动找老项目，自动做 codemode，自动跑 ci，自动提 PR，然后自动跟进进度。

最后有一点是很多人容易忽略的，技术不是问题的唯一解。迁移这件事，新框架一旦成熟，可以找老板推其他团队做自上而下的迁移要求，写入 KPI，效率通常更高。

#日更
