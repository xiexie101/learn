---
title: "76 - ã€Š2022 æœ€æ½®çš„ Demo ç¼–å†™æ–¹å¼ã€‹"
date: 2022-03-17
url: https://sorrycc.com/write-a-demo-2022
---

å‘å¸ƒäº 2022å¹´3æœˆ17æ—¥

# 76 - ã€Š2022 æœ€æ½®çš„ Demo ç¼–å†™æ–¹å¼ã€‹

å‰å‡ å¤©æœ‰çœ‹åˆ° [https://github.com/jspm/jspm-vscode](https://github.com/jspm/jspm-vscode) ï¼Œå¾€å‰å¤šæƒ³äº†æƒ³ï¼Œæ•´ç†äº†ä¸€ç§å†™ Demo çš„æ–¹å¼ã€‚

ğŸŒ´ èƒŒæ™¯

æœ‰æ—¶å€™æˆ‘ä»¬ä¼šä¸´æ—¶æœ‰éœ€æ±‚éœ€è¦å†™ä¸€ä¸ª Demo éªŒè¯ä¸‹ï¼Œä¸çŸ¥å¤§å®¶æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿä¸€ä¸ªé€‰æ‹©æ˜¯ç”¨çº¿ä¸ŠæœåŠ¡ï¼Œæ¯”å¦‚ codesandboxã€stackblitz ç­‰ã€‚ä½†å¦‚æœæƒ³æœ¬åœ°è·‘ä¸€ä¸ªå‘¢ï¼Ÿå¥½åƒè¿˜æ²¡é‚£ä¹ˆç®€å•ï¼Œå› ä¸ºä¼šæœ‰ä¾èµ–å’Œè¯­æ³•è½¬æ¢çš„éœ€æ±‚ã€‚

ä¾èµ–éœ€æ±‚æ¯”å¦‚ reactã€lodashã€antd ç­‰ã€‚æ€è·¯ä¸€æ˜¯ç”¨ umd åŒ…ï¼Œå¾ˆå¤šåº“éƒ½æœ‰æä¾›ã€‚ä½†ä¹Ÿæœ‰å¾ˆå¤šåº“æ²¡æœ‰æä¾›ï¼Œå¦å¤–ä¸€ä¸ªä¸ªå»æ‰¾å¯¹åº”ä¾èµ–çš„ umd åŒ…ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼›æ€è·¯äºŒæ˜¯ç”¨ webpack æˆ– esbuild æ‰“åŒ…ï¼Œè¿™å°±å¤æ‚äº†ï¼Œæˆ‘ä»¬åªæ˜¯è¦å†™ä¸ª Demo è€Œå·²ã€‚

è¯­æ³•è½¬æ¢æ¯”å¦‚ TypeScriptã€JSX ç­‰ã€‚TypeScript è¿˜å¥½ï¼ŒJSX å¦‚ä½•æ‰‹å†™å°±å¾ˆå´©æºƒäº†ã€‚

â± ä»£ç 

html æ–‡ä»¶è§é™„ä»¶ã€‚

\`\`\`html \`\`\`

ğŸ’¡ ç‰¹ç‚¹

1ã€åªéœ€ä¸€ä¸ª html æ–‡ä»¶ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ‹†å•ç‹¬çš„ JS æ¥å†™ï¼Œç»™ script åŠ  src å±æ€§å³å¯ï¼‰  
2ã€æ”¯æŒä¾èµ–  
3ã€æ”¯æŒ JSX ç­‰é«˜çº§è¯­æ³•  
4ã€æ— éœ€ serverï¼ŒåŒå‡»æ‰“å¼€ html å³èƒ½è·‘  
5ã€æ— éœ€å®‰è£…ä¾èµ–ï¼Œæ— éœ€ node\_modules  
6ã€åŸºäºæœ€æ–°çš„ ESMã€type moduleã€ImportMaps ç­‰æŠ€æœ¯

ğŸ¤º åŸç†

ä¾èµ–éƒ¨åˆ†æ˜¯åŸºäº importmapsã€‚è€Œè¿™ importmaps æ˜¯æ€ä¹ˆæ¥çš„ï¼ŸåŸºäº [https://github.com/jspm/generatorï¼Œç®€å•å‡ è¡Œå³å¯æ‹¿åˆ°](https://github.com/jspm/generator%EF%BC%8C%E7%AE%80%E5%8D%95%E5%87%A0%E8%A1%8C%E5%8D%B3%E5%8F%AF%E6%8B%BF%E5%88%B0) jspm æœåŠ¡çš„ importã€‚

```ts
const { Generator } = await import('@jspm/generator');  
const generator = new Generator({});  
await generator.install('react');  
await generator.install('react-dom');  
console.log(JSON.stringify(generator.getMap(), null, 2));
```

JSX ç­‰è¯­æ³•ç¼–è¯‘æ˜¯ç”¨ [https://babeljs.io/docs/en/babel-standaloneã€‚ä»–ä¼šè‡ªåŠ¨ç¼–è¯‘å£°æ˜äº†](https://babeljs.io/docs/en/babel-standalone%E3%80%82%E4%BB%96%E4%BC%9A%E8%87%AA%E5%8A%A8%E7%BC%96%E8%AF%91%E5%A3%B0%E6%98%8E%E4%BA%86) type=â€œtext/jsxâ€ æˆ– type=â€œtext/babelâ€ çš„ script æ ‡ç­¾ã€‚å®æ—¶ç¼–è¯‘åº”è¯¥è¿˜æœ‰å…¶ä»–é€‰é¡¹ï¼Œæ¯”å¦‚ [https://github.com/alangpierce/sucrase](https://github.com/alangpierce/sucrase) å’Œ [https://github.com/bublejs/buble](https://github.com/bublejs/buble) ï¼Œæš‚æœªå°è¯•ã€‚

ğŸ§™â€â™‚ï¸ æ„Ÿå—

æ•´ä½“æ¯”è¾ƒç®€å•ï¼Œä½†è¿˜æœ‰ä¸ªé—®é¢˜æ˜¯ä¾èµ–åˆ° importmaps çš„ç”Ÿæˆè¿‡ç¨‹ç›®å‰æ˜¯æ‰‹åŠ¨ï¼Œå¯ä»¥è½¬ä¸ºè‡ªåŠ¨ã€‚ä¸€ä¸ªæ€è·¯æ˜¯å°è£…ä¸ª cliï¼›å¦ä¸€ä¸ªæ€è·¯æ˜¯çº¯ runtime æ–¹æ¡ˆï¼ŒåŒæ—¶æŠŠ importmaps ä¹ŸåŠ¨æ€ç”Ÿæˆäº†ã€‚

ç®€åŒ–ä¹‹ååªè¦è¿™æ ·ï¼Œ

```html
<!-- å« 1ã€babel standalone 2ã€script å†…å®¹ä¾èµ–è§£æ 3ã€importmaps from jspm 4ã€dynamic importmaps -->
<script src="https://path/to/demo-runtime.js"></script>

<!-- æ­£å¸¸ DEMO -->
<div id="root"></div>
<script type="text/jsx" data-type="module">
import React from 'react';
import ReactDOM from 'react-dom';
function App() {
Â return (
Â Â <div>
Â Â Â <h1>Hello, world!</h1>
Â Â </div>
Â );
}
ReactDOM.render(<App />, document.getElementById('root'));
</script>
```

æœ‰äººæœ‰å…´è¶£å°è¯•ä¸‹å—ï¼Ÿà­§ğŸ˜‚à­¨
