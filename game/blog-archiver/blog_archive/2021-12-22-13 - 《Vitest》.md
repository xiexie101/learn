---
title: "13 - 《Vitest》"
date: 2021-12-22
url: https://sorrycc.com/vitest
---

发布于 2021年12月22日

# 13 - 《Vitest》

聊下新出的 Vitest。

Vitest 开源了，今天翻了翻，做一些摘要。感兴趣的可以用 [https://stackblitz.com/edit/node-xifxdq](https://stackblitz.com/edit/node-xifxdq) 先跑个 DEMO。

Vitest 顾名思义是 Vite + Test。作为测试工具，对标的是 Jest，解的问题是 Vite 项目用 Jest 的配置复杂度和功能冗余问题。因为像文件编译、Module Graph、热更新等 Vite 里已做过一遍，Jest 再有单独一套就重复了。按这个思路，感觉可能还会有基于 Vite 的 Linter 工具出现。

说下优点。Vitest 因为基于 Vite，不安装 Vite 时包尺寸仅有 2.81M；速度方面还没具体体感，因为 jest + esbuild 也可以很快；有个未发布的 [UI 功能](https://github.com/vitest-dev/vitest/tree/main/packages/ui)还挺期待的。

缺点还是太新和缺乏积累，我个人比较喜欢用「厚重」的有长期积累的工具，暂不会使用 Vitest。基于 Vite 的项目可以尝试下，否则建议观望。

技术栈是方面调研过程中最有趣的事，看 Vitest 的技术栈基本上可了解测试相关的各种底层库。比如 tinypool 用于基于 worker 的多线程，chai 用于断言，tinyspy 用于 mocking，jsdom 或 happy-dom 用于 DOM mocking，c8 用于代码覆盖率。

参考：  
[https://github.com/vitest-dev/vitest](https://github.com/vitest-dev/vitest)
