---
title: "95 - 《Bigfish 4 特性 07：微生成器》"
date: 2022-04-12
url: https://sorrycc.com/bigfish-4-feat-07-micro-generator
---

发布于 2022年4月12日

# 95 - 《Bigfish 4 特性 07：微生成器》

微生成器的概念来自 Modern.js。Modern.js 引入很多新概念，其中「微生成器」还是非常贴切的。他包含两个功能，1）小型脚手架，2）功能的开启与关闭。Bigfish 3 虽然也有 generate 命令，但只包含功能 1。

Bigfish 4 拓展了下 generate（alias 为 g）命令。除了支持更多类型的小型脚手架生成，还支持功能的开启与关闭，以及比如 Monorepo、react 和 antd 版本等的功能切换。

```bash
$ npx bigfish g
? Pick generator type › - Use arrow-keys. Return to submit.
❯  创建页面 -- Create a umi page by page name
  创建组件 -- .
  创建 mock 代码 -- .
  创建 model 代码 -- .
  启用 Prettier -- Setup Prettier Configurations
  启用 Jest -- Setup Jest Configuration
  启用 E2E 测试 -- .
  启用 Tailwind CSS -- Setup Tailwind CSS configuration
  启用 SSR -- .
  启用 Low Import 研发模式 -- .
  启用权限方案 -- .
  启用 Monaco 编辑器 -- .
  关闭 Dva 数据流 -- Configuration, Dependencies, and Model Files for Dva
  关闭 MFSU -- .
  切换为 Monorepo 项目 -- .
  切换 React 为 18 -- .
  切换 Antd 为 5 -- .
```

注：以上为效果图，使用时请以实物为准，目前包含部分功能，剩余部分会在微生成器的下个迭代添加。

为啥要做功能的开启与关闭？几个原因，1）从我个人的角度看，我会希望安装的东西都是我用到的，比如 test、lint、prettier，这些不是每个人或每个项目都需要，当需要使用时再安装相关依赖会更好；2）部分功能的开启需要多个步骤，参考文档手动操作费时又费力，比如开启 dva 需要「配置开启、配置插件、安装依赖、创建示例 Model」四步，启用 Prettier 也需要「添加配置、安装依赖、配置 IDE」三步，这些重复工作能交给机器就不应该麻烦 Bigfish 的用户。

斗胆做下预测。从长远看，我们会把更多关键功能的代码片段、启用关闭、功能切换放上来，然后「bigfish g」会成为开发者高频使用的其中一个入口，同时减少对文档的依赖，Bigfish 的答疑量也会同步减少。

参考：  
[Modern.js 名词解释](https://www.yuque.com/docs/share/4aca8687-cab4-4732-ae7e-7e9e456f1828)  
[微生成器 - Umi 4](https://next.umijs.org/docs/guides/generator)
