---
title: "444 - 《Mako：用 Rust 实现极速的构建工具 - 大纲》"
date: 2024-05-29
url: https://sorrycc.com/mako-a-rust-based-fast-bundler
---

发布于 2024年5月29日

# 444 - 《Mako：用 Rust 实现极速的构建工具 - 大纲》

> 计划 6 月底在 SECon 上分享，上周末 GIAC 深圳里是通过时间线讲 Mako，从 0 到 1 到落地到开源。这次准备换个角度，除了介绍 Mako 之外，期望大家听完之后如果想动手写一个构建器可以有个整体的思路。昨天花 3 小时整理了大纲和 PPT 初稿，大纲如下（文字稿和 PPT 待分享后更新）。

*   封面
*   个人介绍
*   大纲
*   介绍 Mako（8min）
    *   是什么？
    *   Mako 怎么来的？
    *   Mako 在蚂蚁的落地情况
    *   效果演示
    *   Benchmark
    *   Getting Started
    *   时间线 & 里程碑
    *   下一步规划
*   从 0 实现 Rust 构建工具（目的是让大家对自己实现一个构建工具有完整的理解，如果想要做，也能入手实现一个，同时，如果有贡献或者实现插件的需求，也更好理解）（15min）
    *   如果你是 Rust 0 基础（学 Rust、or 用 JavaScript）
    *   从 Toy Version 开始（代码、演示）
    *   构建的完整流程（架构图 & 没有并发）
    *   Build 阶段详解（从文件到 Module Graph）
        *   load
            *   文件处理：CSS、JavaScript、Assets 等
        *   parse
        *   transform
        *   analyze\_deps
        *   resolve
        *   并发处理 （放后面讲提速时讲？）
    *   Generate 阶段详解（从 Module Graph 到 Chunk Graph 到产物文件）
        *   chunk
        *   ast to code
        *   产物格式，esm、cjs、umd、iife 等
        *   Runtime 设计
    *   单文件代码
    *   Binding 层（NApi 等）
*   面临的问题（1min）
    *   功能缺失（Chunk）
    *   边界场景
    *   构建速度（时间有限，先解这个）
    *   产物性能
    *   研发体验
    *   …
*   提升构建器速度的 N 种方法（15min）
    *   Benchmark 数据驱动
    *   构建器提速的方法论（并发、缓存、延迟）
    *   工程化找卡点，避免过早优化
    *   语言层和内存优化
    *   并发（在前面的架构图上加上并发）
    *   缓存（内存缓存、物理缓存、类 MFSU）
    *   延迟（按需编译）
    *   桶文件优化（提前 Tree Shaking）
    *   极速热更
    *   Less 构建提速
    *   noParse
*   小结
*   脑暴
    *   插件体系 or not？
    *   下一步计划
    *   最后提升下？
    *   代码设计

参考：  
\[\[SECon 2024 深圳\]\]  
[369 - 《如何开发构建工具》](https://sorrycc.com/how-to-write-bundler)
