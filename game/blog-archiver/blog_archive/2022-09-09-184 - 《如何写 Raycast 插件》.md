---
title: "184 - 《如何写 Raycast 插件》"
date: 2022-09-09
url: https://sorrycc.com/how-to-write-raycast-plugin
---

发布于 2022年9月9日

# 184 - 《如何写 Raycast 插件》

Raycast 我其实没用，我用的是 Alfred。总感觉 Raycast 没 Alfred 快，但是 Raycast 支持用 JS 写插件确实非常友好。最近发现 shuding 在用（[https://github.com/shuding/random-branch），就想着翻翻](https://github.com/shuding/random-branch%EF%BC%89%EF%BC%8C%E5%B0%B1%E6%83%B3%E7%9D%80%E7%BF%BB%E7%BF%BB) Raycast 的插件机制。

1、Raycast 插件的创建可基于 UI 方式创建，用 Raycast 的「Create Extension」命令一步步操作，即可在本地创建一个 Raycast 插件项目，同时有提供多个模板供选择，比如 Script、Form、List and Detail、Detail、Static List 等。完成后执行「npm i」和「npm run dev」即可启动本地开发。除了 npm i 时需要走 [amazonaws.com](http://amazonaws.com) 下 rasycast-cli 之外，一切都很顺利。

2、打开 Raycast 插件目录，你会看到熟悉的 JavaScript 项目，有 eslint、prettier、package.json 等。源码在 src/index.ts 或 src/index.tsx，Script 类插件是 ts，UI 类插件是 tsx。package.json 的 scripts 里有 dev、build 和 publish 等命令。build 命令我没试成功（提示成功但 dist 下没产物），原因未知。

3、Script 类插件导出 async 函数，比如 [https://github.com/shuding/random-branch](https://github.com/shuding/random-branch) 就是此类。以下是最简的插件示例，复制当前日期。

```ts
import { showHUD, Clipboard } from "@raycast/api";
export default async function main() {
  const now = new Date();
  await Clipboard.copy(now.toLocaleDateString());
  await showHUD("Copied date to clipboard");
}
```

4、UI 类插件导出 react 组件，用熟悉的方式写就好。没翻源码，但可以推断出 Raycast 是基于 react-reconciler 实现的 React 渲染器。以下是最简的插件示例，渲染两个列表。

```tsx
import { List } from "@raycast/api";  
export default function Command() {  
  return (  
    <List>  
      <List.Item title={'123'} />
      <List.Item title={'456'} />
    </List>  
  );  
}
```

5、Raycast API 是我调研 Raycast 插件的主要目的，我希望将其用于 gimi 和个人用的脚本库。API 包含 Cache、Clipboard、Environment（上下文信息）、Feedback（各种提醒）、Keyboard（快捷键启动）、MenuBar（扩展右键）、OAuth（用于继承三方平台）、Preferences（配置）、Storage（本地存储）、System Util（系统相关）、User Interface（界面类）、Window & Search Bar（窗口类）。此外还提供了额外的 @raycast/utils，提供 icon 方法和 一些 hook。

6、没找到 @raycast/api 的源码，不了解 dev 和 build 是咋实现的。如果你知道，请告诉我。

7、在 Raycast 官网（[https://www.raycast.com/careers#open-positions）翻到一个有趣的事，Developer](https://www.raycast.com/careers#open-positions%EF%BC%89%E7%BF%BB%E5%88%B0%E4%B8%80%E4%B8%AA%E6%9C%89%E8%B6%A3%E7%9A%84%E4%BA%8B%EF%BC%8CDeveloper) Advocate 比 Software Engineer 起薪更高。所以「Developer Advocate」到底是啥？国内好像没这个职位。

参考：  
[https://github.com/raycast/extensions](https://github.com/raycast/extensions)  
[https://github.com/raycast/extensions/tree/main/examples/api-examples](https://github.com/raycast/extensions/tree/main/examples/api-examples)  
[https://launchdarkly.com/blog/what-is-a-developer-advocate/](https://launchdarkly.com/blog/what-is-a-developer-advocate/)
