---
title: "347 - 《documate》"
date: 2023-09-22
url: https://sorrycc.com/documate
---

发布于 2023年9月22日

# 347 - 《documate》

1、看到 rspress 加了 documate，想着给 umi 也加一个。documate 的功能是 ai 提问，原理就是 Open AI embedding，把 [285 - 《minicc 和 OpenAI embedding》](https://sorrycc.com/minicc) 里的方案产品化了。

2、全程用了 20 分钟左右时间，效果图如下。

![](https://img.alicdn.com/imgextra/i3/O1CN01GbfFtk1DUo0utyxqN_!!6000000000220-2-tps-2870-1378.png)

3、步骤如下。

1）部署后台并填入 openai key，一键部署地址是 [https://aircode.io/dashboard?owner=AirCodeLabs&repo=documate&branch=main&path=backend&appname=Documate](https://aircode.io/dashboard?owner=AirCodeLabs&repo=documate&branch=main&path=backend&appname=Documate)  
2）安装 @documate/documate 和 @documate/react 两个依赖，前者用于上传文档，后者用于在页面上渲染提问按钮  
3）新增 documate.json，内容如下，注意 backend 别上传，其他人拿着也可以用来上传文档的，由于这个 url 在前台也会用到，一个简单的方法是在部署后把 upload 的改个没人知道的路径

```json
{
  "root": "./docs/docs",
  "include": ["**/*.md", "**/*.mdx"],
  "exclude": ["**/node_modules/**", "**/.turbo/**", "**/.dumi/**"],
  "backend": "https://xxxxx.us.aircode.run/upload-entry-nobody-knows"
}
```

4）上传文档，执行 `npx documate upload`

5）在页面里加入引入 @documate/react 增加入口按钮

```tsx
import { Documate } from '@documate/react';
import '@documate/react/dist/style.css';

<Documate endpoint="https://xxx.us.aircode.run/ask" />
```

参考：  
[https://documate.site/](https://documate.site/)  
[https://github.com/web-infra-dev/rspress/pull/104](https://github.com/web-infra-dev/rspress/pull/104)
