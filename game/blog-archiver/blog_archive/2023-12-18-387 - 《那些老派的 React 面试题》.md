---
title: "387 - ã€Šé‚£äº›è€æ´¾çš„ React é¢è¯•é¢˜ã€‹"
date: 2023-12-18
url: https://sorrycc.com/old-react-interview-questions
---

å‘å¸ƒäº 2023å¹´12æœˆ18æ—¥

# 387 - ã€Šé‚£äº›è€æ´¾çš„ React é¢è¯•é¢˜ã€‹

> æ¥è‡ªä»˜è´¹è¯¾ç¨‹ React of Joy å…¶ä¸­ä¸€èŠ‚çš„æ•´ç†ã€‚

è¿™äº›é—®é¢˜å®Œå…¨è¿‡æ—¶ï¼Œä½†ä½ æœã€ŒReact é¢è¯•é—®é¢˜ã€å´ç»å¸¸èƒ½æœåˆ°ã€‚ç”±äºé¢è¯•å®˜æˆ–è€…ä»–çš„é¢˜åº“æ¯”è¾ƒã€Œè€æ´¾ã€ï¼Œæ‰€ä»¥ä½œä¸ºé¢è¯•è€…ï¼Œé€šå¸¸ä¹Ÿä¸å¾—ä¸å‡†å¤‡è¿™äº›é—®é¢˜ã€‚

1ã€Presentational å’Œ Container ç»„ä»¶æœ‰å•¥åŒºåˆ«ï¼Ÿ

2015 å¹´ï¼ŒDan Abramov å†™äº†ç¯‡åšå®¢å«ã€Š[Presentational and Container Components](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)ã€‹ã€‚æ–‡ç« å»ºè®®äº†ä¸€ç§è®¾è®¡æ¨¡å¼ï¼ŒæŠŠç»„ä»¶åˆ†ä¸ºä¸¤ç±»ï¼šPresentational å’Œ Containerã€‚å‰è€…æ˜¯çº¯ç»„ä»¶ï¼ŒåŸºäº props æ¸²æŸ“ç•Œé¢ï¼›åè€…ç”¨äºç®¡ç† Presentational ç»„ä»¶çš„çŠ¶æ€å’Œé€»è¾‘ã€‚

æ¯”å¦‚è¿™æ ·ã€‚

```tsx
function Counter({ count, increment }) {
  return <button onClick={increment}> Current count: {count} </button>;
}
function CounterContainer() {
  const [count, setCount] = React.useState(0);
  function increment() {
    setCount(count + 1);
  }
  return <Counter count={count} increment={increment} />;
}
export default CounterContainer;
```

ç°åœ¨è¿™ç§æ¨¡å¼å·²å¾ˆå°‘æœ‰äººæåŠï¼Œåˆ›å»ºè€… Dan Abramov ä¹Ÿä¸å†æ¨èã€‚å–è€Œä»£ä¹‹çš„æ–¹æ³•æ˜¯ï¼šå°†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ç§»åˆ°è‡ªå®šä¹‰ Hooks é‡Œã€‚

2ã€ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼Ÿ

é«˜é˜¶ç»„ä»¶ç®€ç§°ã€ŒHOCã€ã€‚ä»–æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªç»„ä»¶å¹¶å°†å…¶åŒ…è£…åœ¨ä¸€ä¸ªæ–°çš„å†…éƒ¨ç»„ä»¶ä¸­ã€‚

æ¯”å¦‚ã€‚

```tsx
function withUser(WrappedComponent) {
  return (props) => {
    const { data } = useSWR("/api/user", fetcher);
    return <WrappedComponent user={data} {...props} />;
  };
}
```

`withUser` å‡½æ•°æ¥å—ä¸€ä¸ªè¾“å…¥ç»„ä»¶ï¼Œå¹¶ç”Ÿæˆä¸€ç§æ–¹æ³•ï¼Œç”¨äºæ¸²æŸ“è¯¥è¾“å…¥ç»„ä»¶ï¼Œå¹¶ã€Œé”å®šã€éƒ¨åˆ†å±æ€§ã€‚

ç„¶åå°±å¯ä»¥è¿™æ ·ã€‚

```tsx
const DashboardWithUser = withUser(Dashboard);
// We then render this element:
<DashboardWithUser />
```

HOC çš„ç›®çš„é€šå¸¸æ˜¯ä¸ºäº†åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«é€»è¾‘ã€‚åœ¨ hooks å‡ºç°ä¹‹å‰ï¼Œæ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å¯ä»¥åœ¨ç»„ä»¶ä¹‹é—´å…±äº«é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¾—ä¸æä¸€äº›æœ‰åˆ›æ„çš„äº‹æƒ…ã€‚hooks å‡ºç°ä¹‹åå°±å¯ä»¥ç”¨è‡ªå®šä¹‰ Hook çš„æ–¹å¼æ¥è§£è¿™ä¸ªé—®é¢˜äº†ï¼Œæ¯”å¦‚æ„å»ºä¸€ä¸ª `useUser` çš„ Hookã€‚

```tsx
function useUser() {
  const { data } = useSWR("/api/user", fetcher);
  return data;
}
```

3ã€è¯·åˆ—ä¸¾ ğ‘› ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

React ç»„ä»¶åœ¨è¿‡å»æ˜¯ JavaScript Classã€‚

```tsx
class Button extends React.Component {
  state = { count: 0 };
  handleClick = () => {
    console.log("Clicked!");
    this.setState({ count: this.state.count + 1 });
  };
  render() {
    return <button onClick={this.handleClick}> {this.props.children} </button>;
  }
}
```

ä»¥ä¸‹æ˜¯æœ€å¸¸è§çš„å‡ ä¸ªï¼š

*   `componentDidMount`
*   `componentWillUpdate`ï¼ˆå·²å¼ƒç”¨ï¼‰
*   `componentDidUpdate`
*   `render`
*   `componentWillUnmount`
*   `componentDidCatch`

ä½ å¯ä»¥åœ¨ [React æ–‡æ¡£](https://react.dev/reference/react/Component)ä¸­æŸ¥çœ‹æ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

4ã€ä»€ä¹ˆæ˜¯ render prop?

Render Prop æ˜¯åœ¨ React ç»„ä»¶ä¹‹é—´ä½¿ç”¨å€¼ä¸ºå‡½æ•°çš„ prop å…±äº«ä»£ç çš„æ–¹æ³•ã€‚å’Œ HOC ä¸€æ ·ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä»¶åœ¨æˆ‘ä»¬æœ‰ hooks ä¹‹å‰ä¸å¾—ä¸åšçš„æœ‰åˆ›æ„çš„äº‹ã€‚

æ¯”å¦‚ã€‚

```tsx
function ScrollPosition({ children }) {
  const [scrollPosition, setScrollPosition] = React.useState(0);
  React.useEffect(() => {
    function handleScroll() {
      setScrollPosition(window.scrollY);
    }
    window.addEventListener("scroll", handleScroll);
    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);
  return children(scrollPosition);
}
function App() {
  return (
    <ScrollPosition>
      {(scrollPosition) => {
        return <p> The user has scrolled by {scrollPosition} pixels. </p>;
      }}
    </ScrollPosition>
  );
}
```

`ScrollPosition` ç»„ä»¶æ¥å—ä¸€ä¸ªå•ç‹¬çš„ propï¼Œ `children` ã€‚ç„¶è€Œï¼Œä¸å¤§å¤šæ•°ç»„ä»¶ä¸åŒï¼Œ `children` ä¸æ˜¯ä¸€ä¸ª React å…ƒç´ ï¼›å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å½“æˆ‘ä»¬æ¸²æŸ“ `ScrollPosition` ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¼šç”¨æŸç§æ•°æ®è°ƒç”¨ `children` å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ `scrollPosition` çŠ¶æ€å˜é‡ã€‚

æœ€å¸¸è§çš„ Render Prop çº¦å®šæ˜¯ç”¨ `children` å±æ€§ï¼Œä½†ä¹Ÿæœ‰ç”¨å…¶ä»–çš„ï¼Œæ¯”å¦‚ç”¨ `render`ã€‚

å’Œ HOC ä¸€æ ·ï¼Œä¹‹æ‰€ä»¥ç”¨ Render Propï¼Œæ˜¯å› ä¸ºæ²¡æœ‰å†…ç½®çš„æ–¹æ³•æ¥åœ¨ç»„ä»¶ä¹‹é—´å…±äº«é€»è¾‘ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºåƒ `ScrollPosition` æˆ– `WindowDimensions` è¿™æ ·çš„ç»„ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨éœ€è¦è¿™äº›æ•°æ®æ—¶é‡ç”¨è¿™äº›ç»„ä»¶ã€‚ç°åœ¨æ¨èçš„è§£æ³•æ˜¯é€šè¿‡è‡ªå®šä¹‰ Hooksã€‚

5ã€React çš„åˆæˆäº‹ä»¶ç³»ç»Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

React æœ‰å®ƒè‡ªå·±çš„è‡ªå®šä¹‰äº‹ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚ä»¥ä¸‹ä»£ç ã€‚

```tsx
import React from "react";
function Counter() {
  return (
    <button
      onClick={(event) => {
        console.log("Event", event);
      }}
    >
      Click me
    </button>
  );
}
export default Counter;
```

å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ä¸œè¥¿ï¼š

![](https://img.alicdn.com/imgextra/i4/O1CN01W9z3Um1G2MI8XQAfL_!!6000000000564-2-tps-1154-248.png)

è¿™ä¸æˆ‘ä»¬é€šè¿‡ vanilla JavaScript æ·»åŠ ç‚¹å‡»å¤„ç†å™¨æ—¶æ‰€çœ‹åˆ°çš„æœ‰æ‰€ä¸åŒï¼Œä½¿ç”¨ `window.addEventListener()` ï¼š

![](https://img.alicdn.com/imgextra/i1/O1CN01kfN75H1rcD4tX74ED_!!6000000005651-2-tps-1116-194.png)

è¿™æ˜¯å› ä¸º React å¸¦æœ‰ä¸€ä¸ªã€Œåˆæˆã€çš„äº‹ä»¶ç³»ç»Ÿã€‚å®ƒæ˜¯å¯¹å†…ç½®äº‹ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªå°è£…ã€‚

ä¸ºä»€ä¹ˆ React è¦è¿™ä¹ˆåšï¼Ÿä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š

1.  **æµè§ˆå™¨æ ‡å‡†åŒ–ã€‚** è¿‡å»ï¼ŒåŸç”Ÿäº‹ä»¶åœ¨ä¸åŒæµè§ˆå™¨é—´ç•¥æœ‰å·®å¼‚ã€‚è€Œåˆæˆäº‹ä»¶æ— è®ºåœ¨å“ªç§æµè§ˆå™¨ä¸­éƒ½æ˜¯ç›¸åŒçš„ã€‚
2.  **æ€§èƒ½ã€‚** React å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­æ‰“åŒ…å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºã€‚

è¯´ä¸‹ã€Œæ€§èƒ½ã€é—®é¢˜ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ã€‚

```tsx
function App() {
  return (
    <>
      <Counter />
      <Counter />
      <Counter />
      <Counter />
      <Counter />
    </>
  );
}
```

æˆ‘ä»¬æ¸²æŸ“äº† 5 ä¸ª `Counter` ç»„ä»¶ï¼Œæ¯ä¸ªå®ä¾‹éƒ½é€šè¿‡ `onClick` æ–¹æ³•ç›‘å¬ç‚¹å‡»äº‹ä»¶ã€‚ç›¸æ¯”ç”¨ `addEventListener` æ³¨å†Œ 5 ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œæ€§èƒ½æ›´å¥½çš„åšæ³•æ˜¯æ³¨å†Œä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå¹¶åœ¨æ‰€æœ‰ 5 ä¸ªå®ä¾‹ä¸­é‡å¤ä½¿ç”¨ã€‚

é‚£åˆæˆæ—¶é—´ç³»ç»Ÿçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ æœ€å¤§çš„ç¼ºç‚¹æ˜¯å®ƒå¤§å¤§å¢åŠ äº† React çš„æ–‡ä»¶å°ºå¯¸ã€‚æœ‰ä¸€äº›ã€Œç±» Reactã€å·¥å…·ï¼Œæ¯”å¦‚ Preact å’Œ Infernoï¼Œå®ƒä»¬æä¾›ä¸ React ç›¸åŒçš„ APIï¼Œä½†æ–‡ä»¶å¤§å°å´å°å¾—å¤šã€‚åŸå› ä¹‹ä¸€æ˜¯ä»–ä»¬ä¸é‡‡ç”¨åˆæˆäº‹ä»¶ç³»ç»Ÿã€‚

å‚è€ƒï¼š  
[https://courses.joshwcomeau.com/joy-of-react/bonus-job-hunting-kit/06-retro-questions](https://courses.joshwcomeau.com/joy-of-react/bonus-job-hunting-kit/06-retro-questions)
