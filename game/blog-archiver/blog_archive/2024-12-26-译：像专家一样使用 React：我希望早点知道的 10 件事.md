---
title: "è¯‘ï¼šåƒä¸“å®¶ä¸€æ ·ä½¿ç”¨ Reactï¼šæˆ‘å¸Œæœ›æ—©ç‚¹çŸ¥é“çš„ 10 ä»¶äº‹"
date: 2024-12-26
url: https://sorrycc.com/react-like-a-pro-10-things-i-regret-not-knowing-earlier
---

å‘å¸ƒäº 2024å¹´12æœˆ26æ—¥

# è¯‘ï¼šåƒä¸“å®¶ä¸€æ ·ä½¿ç”¨ Reactï¼šæˆ‘å¸Œæœ›æ—©ç‚¹çŸ¥é“çš„ 10 ä»¶äº‹

> åŸæ–‡ï¼š[https://www.frontendjoy.com/p/react-like-a-pro-10-things-i-regret-not-knowing-earlier](https://www.frontendjoy.com/p/react-like-a-pro-10-things-i-regret-not-knowing-earlier)  
> ä½œè€…ï¼šNdeye Fatou Diop  
> è¯‘è€…ï¼šChatGPT 4 Turbo

å¦‚æœä½ æ˜¯ä¸€ä¸ªè¢« React æå¾—ç„¦å¤´çƒ‚é¢çš„åˆçº§å¼€å‘è€…ï¼Œä½ å¹¶ä¸å­¤å•ã€‚

å½“æˆ‘åˆšå¼€å§‹æ—¶ï¼Œæˆ‘çŠ¯äº†å¾ˆå¤šé”™è¯¯â€”â€”å¦‚æœæˆ‘ä¸€å¼€å§‹å°±çŸ¥é“è¿™åä»¶äº‹ï¼Œè¿™äº›é”™è¯¯æœ¬å¯ä»¥é¿å…ã€‚

è®©æˆ‘å¸®ä½ ç»•è¿‡è¿™äº›å¼¯è·¯ã€‚

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## ç›®å½•

*   [1\. ä½¿ç”¨ children å±æ€§å¤§å¹…æå‡åº”ç”¨æ€§èƒ½](#1-drastically-improve-app-performan)
*   [2\. ä½•æ—¶ä½¿ç”¨ Refs è€Œä¸æ˜¯ State](#2-when-to-use-refs-vs-state)
*   [3\. ä¼˜å…ˆä½¿ç”¨å‘½åå¯¼å‡ºè€Œä¸æ˜¯é»˜è®¤å¯¼å‡º](#3-prefer-named-exports-over-default)
*   [4\. å°½å¯èƒ½é¿å…ä½¿ç”¨ useEffect](#4-avoid-use-effect-at-all-costs)
*   [5\. ç†è§£ React çš„ç”Ÿå‘½å‘¨æœŸ](#5-understand-reacts-lifecycle)
*   [6\. ä½¿ç”¨ ESLint è¿½è¸ªä½çº§é”™è¯¯](#6-track-silly-mistakes-with-es-lint)
*   [7\. ä½¿ç”¨ React DevTools æ›´æ™ºèƒ½åœ°è°ƒè¯•](#7-debug-smarter-with-react-dev-tool)
*   [8\. ä½¿ç”¨é”™è¯¯è¾¹ç•Œé¿å…æ•´ä½“å´©æºƒ](#8-use-error-boundaries-to-avoid-tot)
*   [9\. åƒä¸“ä¸šäººå£«ä¸€æ ·ç»„ç»‡ä»£ç ](#9-organize-your-code-like-a-pro)
*   [10\. React å®˜ç½‘æ‹¥æœ‰ä½ éœ€è¦çš„ä¸€åˆ‡](#10-the-react-website-has-everything)

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 1\. ä½¿ç”¨ `children` å±æ€§å¤§å¹…æå‡åº”ç”¨æ€§èƒ½

`children` å±æ€§ä¸ä»…ä»…ç”¨äºä¼ é€’åµŒå¥—å…ƒç´ ã€‚

å®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

*   **é¿å…å±æ€§é’»å–**ï¼šç›´æ¥å°†å±æ€§ä¼ é€’ç»™å­ç»„ä»¶ï¼Œè€Œä¸æ˜¯é€šè¿‡çˆ¶ç»„ä»¶è·¯ç”±ã€‚
*   **ç¼–å†™å¯æ‰©å±•ä»£ç **ï¼šæ— éœ€ä¿®æ”¹çˆ¶ç»„ä»¶å³å¯ä¿®æ”¹å­ç»„ä»¶ã€‚
*   **é¿å…"æ…¢é€Ÿ"ç»„ä»¶ä¸å¿…è¦çš„é‡æ¸²æŸ“**ï¼ˆè§ä¸‹é¢çš„ä¾‹å­ ğŸ‘‡ï¼‰ã€‚

âŒ **é”™è¯¯ç¤ºèŒƒï¼š** æ¯å½“ `Dashboard` æ¸²æŸ“æ—¶ï¼ˆå³æ¯æ¬¡å½“å‰æ—¶é—´æ›´æ–°æ—¶ï¼‰ï¼Œ`MyVerySlowComponent` éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚

```ts
function App() {
  // å…¶ä»–é€»è¾‘...
  return <Dashboard />;
}

function Dashboard() {
  const [currentTime, setCurrentTime] = useState(new Date());
  useEffect(() => {
    const intervalId = setInterval(() => {
      setCurrentTime(new Date());
    }, 1_000);
    return () => clearInterval(intervalId);
  }, []);

  return (
    <>
      <h1>{currentTime.toTimeString()}</h1>
      <MyVerySlowComponent />
    </>
  );
}
```

ğŸ’¡ ä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ptrvtuiuhptr2adq9ica.gif)çœ‹åˆ°ä½¿ç”¨ [React Developer Tool çš„åˆ†æå™¨](https://chromewebstore.google.com/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi)å±•ç¤ºçš„æ€§èƒ½é—®é¢˜ã€‚

âœ… **æ­£ç¡®ç¤ºèŒƒï¼š** `MyVerySlowComponent` ä¸ä¼šä¸å¿…è¦åœ°é‡æ–°æ¸²æŸ“ã€‚

```ts
function App() {
  return (
    <Dashboard>
      <MyVerySlowComponent />
    </Dashboard>
  );
}

function Dashboard({ children }) {
  const [currentTime, setCurrentTime] = useState(new Date());
  useEffect(() => {
    const intervalId = setInterval(() => {
      setCurrentTime(new Date());
    }, 1_000);
    return () => clearInterval(intervalId);
  }, []);

  return (
    <>
      <h1>{currentTime.toTimeString()}</h1>
      {children}
    </>
  );
}
```

ğŸ’¡ ä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/480znnhi87gws2u9qmuf.gif)çœ‹åˆ°ä¼˜åŒ–åçš„æ•ˆæœã€‚

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 2\. ä½•æ—¶ä½¿ç”¨ Refs è€Œä¸æ˜¯ State

Refs éå¸¸é€‚åˆé‚£äº›**ä¸åº”è§¦å‘é‡æ–°æ¸²æŸ“**çš„å€¼ã€‚

ä¸å…¶é»˜è®¤ä½¿ç”¨ stateï¼Œä¸å¦‚å…ˆé—®é—®è‡ªå·±ï¼š_â€œè¿™ä¸ªå€¼æ”¹å˜æ—¶éœ€è¦è§¦å‘é‡æ–°æ¸²æŸ“å—ï¼Ÿâ€_ å¦‚æœç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå°±ä½¿ç”¨ refã€‚

å®ƒä»¬éå¸¸é€‚åˆè·Ÿè¸ªå¯å˜å€¼ï¼Œå¦‚è®¡æ—¶å™¨ã€DOM å…ƒç´ æˆ–åœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒä½†ä¸å½±å“ UI çš„å€¼ã€‚

âŒ **é”™è¯¯ç¤ºèŒƒ**ï¼šæˆ‘ä»¬åœ¨ state ä¸­å­˜å‚¨ `intervalId`ã€‚å½“ `intervalId` çŠ¶æ€æ”¹å˜æ—¶ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ï¼Œå³ä½¿ UI ä¿æŒä¸å˜ã€‚

```ts
function Timer() {
  const [time, setTime] = useState(new Date());
  const [intervalId, setIntervalId]= useState();

  useEffect(() => {
    const id = setInterval(() => {
      setTime(new Date());
    }, 1_000);
    setIntervalId(id);
    return () => clearInterval(id);
  }, []);

  const stopTimer = () => {
    intervalId && clearInterval(intervalId);
  };

  return (
    <>
      <>å½“å‰æ—¶é—´ï¼š{time.toLocaleTimeString()} </>
      <button onClick={stopTimer}>åœæ­¢è®¡æ—¶å™¨</button>
    </>
  );
}
```

âœ… **æ­£ç¡®ç¤ºèŒƒ**ï¼šæˆ‘ä»¬å°† `intervalId` å­˜å‚¨ä¸º refã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸ä¼šæœ‰é¢å¤–çš„çŠ¶æ€è§¦å‘é‡æ–°æ¸²æŸ“ã€‚

```ts
function Timer() {
  const [time, setTime] = useState(new Date());
  const intervalIdRef = useRef();
  const intervalId = intervalIdRef.current;

  useEffect(() => {
    const id = setInterval(() => {
      setTime(new Date());
    }, 1_000);
    intervalIdRef.current = id;
    return () => clearInterval(id);
  }, []);

  const stopTimer = () => {
    intervalId && clearInterval(intervalId);
  };

  return (
    <>
      <>å½“å‰æ—¶é—´ï¼š{time.toLocaleTimeString()} </>
      <button onClick={stopTimer}>åœæ­¢è®¡æ—¶å™¨</button>
    </>
  );
}
```

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 3\. ä¼˜å…ˆä½¿ç”¨å‘½åå¯¼å‡ºè€Œä¸æ˜¯é»˜è®¤å¯¼å‡º

å‘½åå¯¼å‡ºä½¿é‡æ„å’Œè°ƒè¯•æ›´å®¹æ˜“ã€‚

âŒ **é”™è¯¯ç¤ºèŒƒ**ï¼šé‡å‘½åéœ€è¦æ‰‹åŠ¨æ›´æ–°ã€‚

```ts
export default function Button() {}
// ä¹‹å...
import Button from './Button';
```

âœ… **æ­£ç¡®ç¤ºèŒƒ**ï¼šé‡å‘½åä¼šè‡ªåŠ¨å‘ç”Ÿã€‚

```ts
export function Button() {}
// ä¹‹å...
import { Button } from './Button';
```

ä½ å¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ‰¾åˆ°æ›´å¤šå…³äºå‘½åå¯¼å…¥çš„è®ºæ® ğŸ‘‰ [101 ä¸ª React æŠ€å·§å’Œçªé—¨](https://dev.to/_ndeyefatoudiop/101-react-tips-tricks-for-beginners-to-experts-4m11#27-prefer-named-exports-over-default-exports)ã€‚

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 4\. å°½å¯èƒ½é¿å…ä½¿ç”¨ `useEffect`

æˆ‘å¤„ç†è¿‡çš„æ¯ä¸€æ¬¡åº”ç”¨å´©æºƒèƒŒåéƒ½è—ç€ `useEffect` ğŸ˜…ã€‚

è¯´çœŸçš„ï¼Œå°½é‡é¿å…ä½¿ç”¨ `useEffect`ï¼š

*   å®ƒå¾ˆå®¹æ˜“å¯¼è‡´è¿‡åº¦æ¸²æŸ“ã€ä»£ç æ™¦æ¶©ç­‰é—®é¢˜ã€‚
*   å®ƒä½¿ä»£ç æµç¨‹æ›´éš¾è¿½è¸ªã€‚

ç›¸åï¼Œè€ƒè™‘æ˜¯å¦å¯ä»¥ä¸ä½¿ç”¨å®ƒæ¥å®ç°ç›¸åŒçš„ç»“æœã€‚

âŒ **é”™è¯¯ç¤ºèŒƒ**ï¼šåœ¨ `useEffect` ä¸­è°ƒç”¨ `onToggled`ã€‚

```ts
function Toggle({ onToggled }) {
    const [on, setOn] = React.useState(false);
    const toggle = () => setOn(!on);
    
    useEffect(() => {
        onToggled(on);
    }, [on]);

    return (
        <button onClick={toggle}>
            {on ? 'on' : 'off'}
        </button>
    );
}
```

âœ… **æ­£ç¡®ç¤ºèŒƒ**ï¼šåœ¨ç›¸å…³æ—¶æœºè°ƒç”¨ `onToggled`ã€‚

```ts
function Toggle({ onToggled }) {
    const [on, setOn] = React.useState(false);
    const handleToggle = () => {
        const next = !on;
        setOn(next);
        onToggled(next);
    };
    return (
        <button onClick={handleToggle}>
            {on ? 'on' : 'off'}
        </button>
    );
}
```

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šé¿å…ä½¿ç”¨ `useEffect` çš„æŠ€å·§ ğŸ‘‰ [ä½ å¯èƒ½ä¸éœ€è¦ Effect](https://react.dev/learn/you-might-not-need-an-effect)ã€‚

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 5\. ç†è§£ React çš„ç”Ÿå‘½å‘¨æœŸ

äº†è§£ç”Ÿå‘½å‘¨æœŸé˜¶æ®µå¯ä»¥é¿å… bug å’Œæ€§èƒ½é—®é¢˜ï¼š

*   **æŒ‚è½½**ï¼šç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ã€‚
*   **æ›´æ–°**ï¼šå½“æŸäº›çŠ¶æ€æ”¹å˜å¹¶ä¸” React é‡æ–°æ¸²æŸ“æ—¶ã€‚
*   **å¸è½½**ï¼šå½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶ã€‚

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 6\. ä½¿ç”¨ ESLint è¿½è¸ªä½çº§é”™è¯¯

ESLint å¯ä»¥å¸®ä½ é¿å…å¾®å¦™çš„ bugï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ hooks æ—¶ã€‚

âŒ **é”™è¯¯ç¤ºèŒƒ**ï¼š`useEffect` ä¸­ç¼ºå°‘ä¾èµ–é¡¹ã€‚

```ts
useEffect(() => {
  console.log(data);
}, []); // ç¼ºå°‘ä¾èµ–é¡¹ï¼
```

âœ… **æ­£ç¡®ç¤ºèŒƒ**ï¼šä½¿ç”¨ ESLint å’Œæ’ä»¶å¦‚ [eslint-plugin-react-hooks](https://www.npmjs.com/package/eslint-plugin-react-hooks)ã€‚

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 7\. ä½¿ç”¨ React DevTools æ›´æ™ºèƒ½åœ°è°ƒè¯•

React DevTools å¯¹è°ƒè¯•æ€§èƒ½é—®é¢˜æ¥è¯´æ˜¯é»„é‡‘å·¥å…·ã€‚ä½¿ç”¨"Profiler"æ ‡ç­¾æ¥æ‰¾å‡ºæ…¢é€Ÿç»„ä»¶ã€‚

âŒ **é”™è¯¯ç¤ºèŒƒ**ï¼šä»…ä¾èµ– `console.log` å’Œè®¡æ—¶å™¨æ¥çŒœæµ‹åº”ç”¨ä¸ºä»€ä¹ˆæ…¢ã€‚

âœ… **æ­£ç¡®ç¤ºèŒƒ**ï¼šä½¿ç”¨ Profiler æ¥ï¼š

*   æ‰¾å‡ºè¿‡åº¦æ¸²æŸ“çš„ç»„ä»¶ã€‚
*   é€šè¿‡ç«ç„°å›¾å®šä½æ˜‚è´µçš„æ¸²æŸ“ã€‚

ğŸ’¡ åœ¨è¿™ä¸ªå¾ˆæ£’çš„[æŒ‡å—](https://www.freecodecamp.org/news/how-to-use-react-dev-tools/)ä¸­å­¦ä¹ å¦‚ä½•ä½¿ç”¨å®ƒã€‚

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 8\. ä½¿ç”¨é”™è¯¯è¾¹ç•Œé¿å…æ•´ä½“å´©æºƒ

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä½ çš„åº”ç”¨åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­é‡åˆ°é”™è¯¯ï¼Œæ•´ä¸ª UI éƒ½ä¼šå´©æºƒ ğŸ’¥ã€‚

ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œä½¿ç”¨[é”™è¯¯è¾¹ç•Œ](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary)æ¥ï¼š

*   å³ä½¿å‘ç”Ÿé”™è¯¯ï¼Œä¹Ÿèƒ½ä¿æŒåº”ç”¨çš„éƒ¨åˆ†åŠŸèƒ½ã€‚
*   æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¹¶å¯é€‰æ‹©è·Ÿè¸ªé”™è¯¯ã€‚

ğŸ’¡ æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨ [react-error-boundary](https://www.npmjs.com/package/react-error-boundary) åŒ…

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 9\. åƒä¸“ä¸šäººå£«ä¸€æ ·ç»„ç»‡ä»£ç 

æ•´æ´çš„ä»£ç å°±æ˜¯å¯ç»´æŠ¤çš„ä»£ç ã€‚

ä½ å¯ä»¥éµå¾ªè¿™äº›ç®€å•çš„æç¤ºï¼š

*   å°†ç»„ä»¶ä¸ç›¸å…³èµ„æºï¼ˆå¦‚æ ·å¼ã€æµ‹è¯•ç­‰ï¼‰æ”¾åœ¨ä¸€èµ·
*   ä¿æŒæ–‡ä»¶å°å·§
*   å°†ç›¸å…³ç»„ä»¶åˆ†ç»„åˆ°æ–‡ä»¶å¤¹ä¸­

âŒ **é”™è¯¯ç¤ºèŒƒ**ï¼šå½“ä½ åˆ é™¤ `Button.js` æ—¶ï¼Œå¾ˆå®¹æ˜“å¿˜è®° `Button.css`ã€‚

```ts
src/
  components/
    Button.js
    Modal.js
styles/
  Button.css
```

âœ… **æ­£ç¡®ç¤ºèŒƒ**ï¼šæˆ‘ä»¬å°†ç›¸å…³æ–‡ä»¶æ”¾åœ¨ä¸€èµ·ã€‚

```ts
src/
  components/
    Button/
      Button.js
      Button.css
      Button.test.js
```

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## 10\. React å®˜ç½‘æ‹¥æœ‰ä½ éœ€è¦çš„ä¸€åˆ‡

ä¸è¦å¿½è§†[å®˜æ–¹ React æ–‡æ¡£](https://reactjs.org)ã€‚å®ƒä»¬åŒ…å«äº†å¤§é‡ç¤ºä¾‹ã€è§£é‡Šå’Œæœ€ä½³å®è·µã€‚

âŒ **é”™è¯¯ç¤ºèŒƒ**ï¼šæ— ä¼‘æ­¢åœ°æœç´¢åŸºæœ¬çš„ React æ¦‚å¿µï¼Œæœ€ç»ˆè½åœ¨è¿‡æ—¶çš„åšå®¢æ–‡ç« ä¸Šã€‚

âœ… **æ­£ç¡®ç¤ºèŒƒ**ï¼šå°†å®˜æ–¹æ–‡æ¡£åŠ å…¥ä¹¦ç­¾ï¼Œé‡åˆ°é—®é¢˜æ—¶é¦–å…ˆæŸ¥é˜…å®ƒã€‚

![](https://media.beehiiv.com/cdn-cgi/image/fit=scale-down,format=auto,onerror=redirect,quality=80/uploads/asset/file/3e1d5bf8-9609-4329-abec-9bfd51432f79/newsletter_divider__1920_x_100_px_.png?t=1731261289)

## æ€»ç»“

æŒæ¡ React éœ€è¦æ—¶é—´ã€‚

ä½†è¿™äº›ç»éªŒæ•™è®­å°†å¸®ä½ é¿å…æˆ‘æ—©æœŸçš„é”™è¯¯ã€‚

ç»§ç»­ç¼–ç ï¼Œä¿æŒå¥½å¥‡å¿ƒï¼Œè®°ä½â€”â€”ä½ ä¸€å®šèƒ½è¡Œï¼
