# 「鸟来了」互动体验 - 实现计划

基于设计文档 [2025-12-28-鸟来了.md](file:///Users/xieshijin/jin/learn/ai/docs/designs/2025-12-28-鸟来了.md)，创建一个像素风格的摄像头互动体验。

## 技术选型

| 技术 | 用途 |
|------|------|
| MediaPipe Holistic | 人体姿态 + 手部检测 |
| Canvas 2D | 渲染像素小鸟和鸟屎 |
| 单 HTML 文件 | 便于分享和运行 |

---

## Proposed Changes

### 项目结构

#### [NEW] [bird-magic/](file:///Users/xieshijin/jin/learn/ai/bird-magic/)
项目目录

#### [NEW] [index.html](file:///Users/xieshijin/jin/learn/ai/bird-magic/index.html)
主文件，包含所有 HTML、CSS 和 JavaScript 代码：

**HTML 结构**：
- 摄像头视频元素
- Canvas 叠加层
- 操作提示 UI

**CSS 样式**：
- 全屏布局
- 像素风 UI 样式
- 动画效果

**JavaScript 模块**：
1. **摄像头模块** - 获取摄像头流
2. **检测模块** - MediaPipe Holistic 初始化和检测
3. **小鸟类 Bird** - 小鸟状态、动画、行为
4. **小鸟管理器 BirdManager** - 生成、更新、移除小鸟
5. **鸟屎系统 PoopSystem** - 鸟屎生成和清除
6. **手势识别 GestureDetector** - 检测摇头、挥手、伸手
7. **渲染器 Renderer** - Canvas 绘制所有元素

---

## 核心实现细节

### 小鸟精灵（像素风）

使用 Canvas 直接绘制像素小鸟，每种鸟有不同颜色：
- 麻雀：棕色系
- 鸽子：灰白色
- 乌鸦：黑色
- 稀有鸟：彩虹渐变

### 小鸟状态机

```
[待机] → [飞向目标] → [降落] → [停留] → [可能拉屎] → [飞走]
              ↑                              ↓
              └──────── 被驱赶时 ←───────────┘
```

### 手势检测逻辑

| 手势 | 检测方法 |
|------|---------|
| 伸手吸引 | 手掌张开 + 位置相对静止 |
| 摇头 | 头部 X 坐标快速左右变化 |
| 挥手 | 手部位置快速移动 |
| 抹鸟屎 | 手部与鸟屎位置碰撞检测 |

---

## Verification Plan

### 功能测试
1. 摄像头正常启动
2. MediaPipe 正确检测头部和手部
3. 小鸟正常飞入并停在头部/手上
4. 手势交互响应正确
5. 鸟屎生成和清除正常

### 浏览器测试
- Chrome 最新版（主要目标）
- Safari（如果可用）
