# Design Doc: CloudRoam Active (云游·不老松) - 居家双重任务康复系统

| 属性 | 描述 |
| :--- | :--- |
| **文档版本** | v1.0 |
| **项目类型** | 数字疗法 / 功能游戏 (Serious Game) |
| **目标用户** | 60+ 老年群体 (轻度认知障碍倾向 / 平衡能力减退风险) |
| **核心平台** | iOS/Android 平板或手机 (前置摄像头) |
| **关键技术** | AI 姿态估计 (Pose Estimation), 躯干重心检测 |

---

## 1. 核心理念 (Design Pillars)

* **隐形康复 (Invisible Rehab)**: 将枯燥的医疗动作（重心转移、反应训练）完全封装在“旅游观光”的体验之下，绝不出现“治疗、病人、测试”等字眼。
* **双重干预 (Dual-Task)**: 强制大脑在处理认知任务（记忆/抑制）的同时，维持身体平衡控制，这是预防跌倒和阿尔茨海默症的最有效手段。
* **零穿戴 (Zero-Wearable)**: 摒弃手环、手柄或传感器，利用普通手机摄像头即可使用，最大化降低老年人的操作心理门槛。

## 2. 交互系统架构 (Interaction Design)

### 2.1 硬件布置
* **设备**：iPad/平板电脑 或 手机投屏到电视。
* **站位**：用户站在距离屏幕 1.5 - 2.0 米处。
* **安全区**：系统启动前强制检测背景，建议用户身后放置一把稳固的椅子或背靠沙发（安全软着陆区）。

### 2.2 核心输入：躯干摇杆 (Body Sway Joystick)
系统不通过“走步”控制，而是捕捉**躯干（肩膀与髋部连线）的倾斜角度**。
* **静止 (Neutral)**: 角色直线自动前行。
* **左/右倾 (Lean L/R)**: 角色向左/右平移，或在路口转向。
* **幅度映射**: 
    * 轻微倾斜 (5°-10°) = 调整行进路线（避障）。
    * 大幅倾斜 (>15°) = 触发关键交互（确认选择/捡拾物品）。

---

## 3. 游戏循环机制 (Core Gameplay Loop)

游戏以**“城市/景点解锁”**为长线进程，单次游戏时长控制在 10-15 分钟。

### 阶段 I: 旅途拾遗 (反应与抑制 - A模式)
* **场景**: 第一人称视角的步道（如：西湖苏堤、故宫长廊、巴黎塞纳河畔）。
* **机制**: 
    * **正向刺激**: 路径左右随机出现“特产气泡”（如：龙井茶、大熊猫玩偶）。用户需向对应方向**倾斜身体**去触碰收集。
    * **负向刺激**: 路径上出现“干扰项”（如：水坑、香蕉皮）。用户需**保持直立或反向倾斜**以避让。
* **康复目标**: 训练动态平衡极限 (Limits of Stability) 及 反应抑制能力 (Go/No-Go)。

### 阶段 II: 迷途寻踪 (空间记忆 - C模式)
* **场景**: 到达复杂的岔路口（三岔口或十字路口）。
* **机制**: 
    * **记忆编码**: 在到达路口前 10 秒，屏幕中央闪现“复古地图”，高亮显示正确路线（例如：先左转，再右转）。地图显示 3 秒后消失。
    * **记忆提取**: 到达路口时，没有提示，用户需凭刚才的记忆，做出**大幅度的身体倾斜**来选择方向。
    * **反馈**: 选对则进入风景更美的“隐藏路线”；选错则绕路（但不显示失败）。
* **康复目标**: 强化海马体功能，针对阿尔茨海默症早期的空间导航障碍。

---

## 4. 激励与反馈系统 (Progression & Feedback)

本系统严格遵循**“去医疗化”**原则，仅面向用户提供正向情绪价值。

### 4.1 结算界面
* **拒绝**: 显示“平衡分数：82分”、“反应延迟：0.5秒”。
* **采用**: 
    * **旅行手账**: “今天您打卡了‘断桥残雪’，收集了 5 盒特产！”
    * **虚拟明信片**: 生成一张带有用户虚拟形象在景点合影的明信片，可一键分享给微信好友或子女。

### 4.2 长期留存
* **地图解锁**: 积累足够的“步数”（游戏时长）解锁下一个城市（如：从‘杭州’解锁‘北京’）。
* **导游伙伴**: 随着等级提升，解锁不同的虚拟伴游（如：小狗、孙悟空、或特定的戏曲角色），它们会在游戏中奔跑在前方引导。

---

## 5. 视觉与无障碍设计 (Accessibility)

* **UI 规范**: 
    * 字体字号 ≥ 36pt，高对比度。
    * 关键指令配合**语音播报**（“前面路口记得左转哦”）。
* **容错机制**: 
    * 即使所有障碍物都撞上，游戏也不会 Game Over，只是收集的特产变少。
    * 保证老人不仅是在训练，更是在“看风景”。

## 6. 技术可行性验证 (Tech Validation)

* **核心库**: Google MediaPipe BlazePose (轻量级，手机端可流畅运行 30fps)。
* **关键算法**: 
    * 计算 `Nose` (鼻尖) 与 `Mid-Hip` (臀部中点) 的水平位移差，通过低通滤波平滑数据，转化为控制信号。
    * 判定逻辑：`if (Nose.x - Hip.x) > Threshold` -> `Trigger Right Lean`.

---

## 7. 后续开发建议 (Next Steps)

1.  **MVP 原型**: 开发一个仅包含“直线行走 + 左右接金币”的 Demo，测试 MediaPipe 在普通光照下的捕捉稳定性。
2.  **内容采编**: 寻找或购买 3-5 个经典旅游城市的 360 度全景视频或 Unity 资产。
3.  **安全测试**: 小范围邀请 65+ 用户测试，观察其在倾斜身体时是否有跌倒倾向，调整判定的灵敏度阈值。
